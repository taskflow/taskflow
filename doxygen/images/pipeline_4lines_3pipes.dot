digraph G {
  rankdir=TD;
  node [shape=circle];

  // Nodes
  n11[label="pipe 1\nline 1"]; 
  n12[label="pipe 2\nline 1"];
  n13[label="pipe 3\nline 1"];
  n21[label="pipe 1\nline 2"];
  n22[label="pipe 2\nline 2"];
  n23[label="pipe 3\nline 2"];
  n31[label="pipe 1\nline 3"]; 
  n32[label="pipe 2\nline 3"];
  n33[label="pipe 3\nline 3"];
  n41[label="pipe 1\nline 4"]; 
  n42[label="pipe 2\nline 4"]; 
  n43[label="pipe 3\nline 4"];

  // Horizontal edges
  n11 -> n12 -> n13;
  n21 -> n22 -> n23;
  n31 -> n32 -> n33;
  n41 -> n42 -> n43;

  // Vertical edges
  n11 -> n21 -> n31 -> n41;
  n12 -> n22 -> n32 -> n42;
  n13 -> n23 -> n33 -> n43;

  // Ranks (rows)
  { rank=same; n11; n12; n13; }
  { rank=same; n21; n22; n23; }
  { rank=same; n31; n32; n33; }
  { rank=same; n41; n42; n43; }
}

