<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cookbook &raquo; Subflow Tasking | Taskflow QuickStart</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="https://taskflow.github.io"><img src="taskflow_logo.png" alt="" />Taskflow</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">QuickStart</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Handbook</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="Cookbook.html">Cookbook</a> &raquo;</span>
          Subflow Tasking
        </h1>
        <nav class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li><a href="#CreateASubflow">Create a Subflow</a></li>
            <li><a href="#RetainASubflow">Retain a Subflow</a></li>
            <li><a href="#JoinASubflow">Join a Subflow Explicitly</a></li>
            <li><a href="#CreateANestedSubflow">Create a Nested Subflow</a></li>
          </ul>
        </nav>
<p>It is very common for a parallel program to spawn task dependency graphs at runtime. In Taskflow, we call this <em>subflow tasking</em>.</p><section id="CreateASubflow"><h2><a href="#CreateASubflow">Create a Subflow</a></h2><p>Subflow tasks are those created during the execution of a graph. These tasks are spawned from a parent task and are grouped together to a <em>subflow</em> dependency graph. To create a subflow, emplace a callable that takes an argument of type <a href="classtf_1_1Subflow.html" class="m-doc">tf::<wbr />Subflow</a>. A <a href="classtf_1_1Subflow.html" class="m-doc">tf::<wbr />Subflow</a> object will be created and forwarded to the execution context of the task. All methods you find in <a href="classtf_1_1Taskflow.html" class="m-doc">tf::<wbr />Taskflow</a> are applicable for <a href="classtf_1_1Subflow.html" class="m-doc">tf::<wbr />Subflow</a>.</p><pre class="m-code"><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span>
<span class="w"> </span><span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Executor</span><span class="w"> </span><span class="n">executor</span><span class="p">;</span>
<span class="w"> </span><span class="mi">3</span><span class="o">:</span>
<span class="w"> </span><span class="mi">4</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// static task A</span>
<span class="w"> </span><span class="mi">5</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;C&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// static task C</span>
<span class="w"> </span><span class="mi">6</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;D&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// static task D</span>
<span class="w"> </span><span class="mi">7</span><span class="o">:</span>
<span class="w"> </span><span class="mi">8</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">subflow</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w"> </span><span class="mi">9</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B1&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// subflow task B1</span>
<span class="mi">10</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B2&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// subflow task B2</span>
<span class="mi">11</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B3&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// subflow task B3</span>
<span class="mi">12</span><span class="o">:</span><span class="w">   </span><span class="n">B1</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B3</span><span class="p">);</span><span class="w">  </span><span class="c1">// B1 runs before B3</span>
<span class="mi">13</span><span class="o">:</span><span class="w">   </span><span class="n">B2</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B3</span><span class="p">);</span><span class="w">  </span><span class="c1">// B2 runs before B3</span>
<span class="mi">14</span><span class="o">:</span><span class="w"> </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B&quot;</span><span class="p">);</span>
<span class="mi">15</span><span class="o">:</span>
<span class="mi">16</span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B</span><span class="p">);</span><span class="w">  </span><span class="c1">// B runs after A</span>
<span class="mi">17</span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">C</span><span class="p">);</span><span class="w">  </span><span class="c1">// C runs after A</span>
<span class="mi">18</span><span class="o">:</span><span class="w"> </span><span class="n">B</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">D</span><span class="p">);</span><span class="w">  </span><span class="c1">// D runs after B</span>
<span class="mi">19</span><span class="o">:</span><span class="w"> </span><span class="n">C</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">D</span><span class="p">);</span><span class="w">  </span><span class="c1">// D runs after C</span>
<span class="mi">20</span><span class="o">:</span>
<span class="mi">21</span><span class="o">:</span><span class="w"> </span><span class="n">executor</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">taskflow</span><span class="p">).</span><span class="n">get</span><span class="p">();</span><span class="w">  </span><span class="c1">// execute the graph to spawn the subflow</span></pre><div><div class="m-graph"><svg style="width: 37.200rem; height: 22.800rem;" viewBox="0.00 0.00 372.00 228.00">
<g transform="scale(1 1) rotate(0) translate(4 224)">
<title>Taskflow</title>
<g class="m-cluster">
<title>cluster_p0x7ffee9781810</title>
<polygon points="8,-8 8,-212 356,-212 356,-8 8,-8"/>
<text text-anchor="middle" x="182" y="-198.5" font-family="Helvetica,sans-Serif" font-size="10.00">Taskflow</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7f9866c01b70</title>
<polygon points="16,-16 16,-141 266,-141 266,-16 16,-16"/>
<text text-anchor="middle" x="141" y="-127.5" font-family="Helvetica,sans-Serif" font-size="10.00">Subflow: B</text>
</g>
<g class="m-node m-flat">
<title>p0x7f9866c01820</title>
<ellipse cx="141" cy="-167" rx="27" ry="18"/>
<text text-anchor="middle" x="141" y="-163.12" font-family="Helvetica,sans-Serif" font-size="10.00">A</text>
</g>
<g class="m-node m-flat">
<title>p0x7f9866c01b70</title>
<ellipse cx="231" cy="-96" rx="27" ry="18"/>
<text text-anchor="middle" x="231" y="-92.12" font-family="Helvetica,sans-Serif" font-size="10.00">B</text>
</g>
<g class="m-edge">
<title>p0x7f9866c01820&#45;&gt;p0x7f9866c01b70</title>
<path d="M158.97,-153.31C171.87,-142.9 189.84,-128.4 204.48,-116.59"/>
<polygon points="206.32,-119.6 211.91,-110.6 201.93,-114.15 206.32,-119.6"/>
</g>
<g class="m-node m-flat">
<title>p0x7f9866c01930</title>
<ellipse cx="231" cy="-167" rx="27" ry="18"/>
<text text-anchor="middle" x="231" y="-163.12" font-family="Helvetica,sans-Serif" font-size="10.00">C</text>
</g>
<g class="m-edge">
<title>p0x7f9866c01820&#45;&gt;p0x7f9866c01930</title>
<path d="M168.4,-167C175.89,-167 184.18,-167 192.2,-167"/>
<polygon points="192.1,-170.5 202.1,-167 192.1,-163.5 192.1,-170.5"/>
</g>
<g class="m-node m-flat">
<title>p0x7f9866c01a40</title>
<ellipse cx="321" cy="-131" rx="27" ry="18"/>
<text text-anchor="middle" x="321" y="-127.12" font-family="Helvetica,sans-Serif" font-size="10.00">D</text>
</g>
<g class="m-edge">
<title>p0x7f9866c01b70&#45;&gt;p0x7f9866c01a40</title>
<path d="M254.66,-105.01C264.34,-108.86 275.83,-113.43 286.46,-117.66"/>
<polygon points="285.12,-120.89 295.7,-121.34 287.7,-114.39 285.12,-120.89"/>
</g>
<g class="m-edge">
<title>p0x7f9866c01930&#45;&gt;p0x7f9866c01a40</title>
<path d="M254.66,-157.73C264.52,-153.7 276.25,-148.9 287.04,-144.48"/>
<polygon points="288.08,-147.84 296.01,-140.81 285.43,-141.36 288.08,-147.84"/>
</g>
<g class="m-node m-flat">
<title>p0x7f9866d01880</title>
<ellipse cx="51" cy="-42" rx="27" ry="18"/>
<text text-anchor="middle" x="51" y="-38.12" font-family="Helvetica,sans-Serif" font-size="10.00">B1</text>
</g>
<g class="m-node m-flat">
<title>p0x7f9866d01ac0</title>
<ellipse cx="141" cy="-96" rx="27" ry="18"/>
<text text-anchor="middle" x="141" y="-92.12" font-family="Helvetica,sans-Serif" font-size="10.00">B3</text>
</g>
<g class="m-edge">
<title>p0x7f9866d01880&#45;&gt;p0x7f9866d01ac0</title>
<path d="M71.53,-53.98C83.15,-61.12 98.11,-70.3 111.08,-78.25"/>
<polygon points="108.88,-81.01 119.23,-83.26 112.54,-75.04 108.88,-81.01"/>
</g>
<g class="m-edge">
<title>p0x7f9866d01ac0&#45;&gt;p0x7f9866c01b70</title>
<path d="M168.4,-96C175.89,-96 184.18,-96 192.2,-96"/>
<polygon points="192.1,-99.5 202.1,-96 192.1,-92.5 192.1,-99.5"/>
</g>
<g class="m-node m-flat">
<title>p0x7f9866d019a0</title>
<ellipse cx="51" cy="-96" rx="27" ry="18"/>
<text text-anchor="middle" x="51" y="-92.12" font-family="Helvetica,sans-Serif" font-size="10.00">B2</text>
</g>
<g class="m-edge">
<title>p0x7f9866d019a0&#45;&gt;p0x7f9866d01ac0</title>
<path d="M78.4,-96C85.89,-96 94.18,-96 102.2,-96"/>
<polygon points="102.1,-99.5 112.1,-96 102.1,-92.5 102.1,-99.5"/>
</g>
</g>
</svg>
</div></div><p>Debrief:</p><ul><li>Lines 1-2 create a taskflow and an executor</li><li>Lines 4-6 create three tasks, A, C, and D</li><li>Lines 8-14 create a task B that spawns a task dependency graph of three tasks B1, B2, and B3</li><li>Lines 16-19 add dependencies among A, B, C, and D</li><li>Line 21 submits the graph to an executor and waits until it finishes</li></ul><p>Lines 8-14 are the main block to enable subflow tasking at task B. The runtime will create a <a href="classtf_1_1Subflow.html" class="m-doc">tf::<wbr />Subflow</a> passing it to task B, and spawn a dependency graph as described by the associated callable. This new subflow graph will be added to the topology of its parent task B.</p></section><section id="RetainASubflow"><h2><a href="#RetainASubflow">Retain a Subflow</a></h2><p>By default, a <a href="classtf_1_1Subflow.html" class="m-doc">tf::<wbr />Subflow</a> automatically clears its internal task graph once it is joined. After a subflow joins, its structure and associated resources are no longer accessible. This behavior is designed to reduce memory usage, particularly in applications that recursively spawn many subflows. For applications that require post-processing, such as visualizing the subflow through <a href="classtf_1_1Taskflow.html#ac433018262e44b12c4cc9f0c4748d758" class="m-doc">tf::<wbr />Taskflow::<wbr />dump</a>, users can disable this default cleanup behavior by calling <a href="classtf_1_1Subflow.html#ac585638d8ca8fb2f34c4826cb0d4f39f" class="m-doc">tf::<wbr />Subflow::<wbr />retain</a> on <code>true</code>. This instructs the runtime to retain the subflow&#x27;s task graph even after it has joined, enabling further inspection or visualization.</p><pre class="m-code"><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span>
<span class="n">tf</span><span class="o">::</span><span class="n">Executor</span><span class="w"> </span><span class="n">executor</span><span class="p">;</span>

<span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sf</span><span class="p">){</span>
<span class="w">  </span><span class="n">sf</span><span class="p">.</span><span class="n">retain</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span><span class="w">  </span><span class="c1">// retain the subflow after join for visualization</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sf</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;A</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sf</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;B</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sf</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;C</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="n">A</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">C</span><span class="p">);</span><span class="w">  </span><span class="c1">// A runs before B and C</span>
<span class="p">});</span><span class="w">  </span><span class="c1">// subflow implicitly joins here</span>

<span class="n">executor</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">taskflow</span><span class="p">).</span><span class="n">wait</span><span class="p">();</span>

<span class="c1">// The subflow graph is now retained and can be visualized using taskflow.dump(...)</span>
<span class="n">taskflow</span><span class="p">.</span><span class="n">dump</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span></pre></section><section id="JoinASubflow"><h2><a href="#JoinASubflow">Join a Subflow Explicitly</a></h2><p>By default, a subflow <em>implicitly</em> joins its parent task when execution leaves its context. All terminal nodes (i.e., nodes with no outgoing edges) in the subflow are guaranteed to precede the parent task. Upon joining, the subflow&#x27;s task graph and associated resources are automatically cleaned up. If your application needs to access variables defined within the subflow after it joins, you can explicitly join the subflow and handle post-processing accordingly. A common use case is parallelizing recursive computations such as the Fibonacci sequence:</p><pre class="m-code"><span class="kt">int</span><span class="w"> </span><span class="nf">spawn</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sbf</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">res1</span><span class="p">,</span><span class="w"> </span><span class="n">res2</span><span class="p">;</span>
<span class="w">  </span><span class="n">sbf</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="n">res1</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sbf</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">res1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spawn</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">sbf</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">);</span>
<span class="w">  </span><span class="n">sbf</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="n">res2</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sbf</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">res2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spawn</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">sbf</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">);</span>
<span class="w">  </span><span class="n">sbf</span><span class="p">.</span><span class="n">join</span><span class="p">();</span><span class="w">    </span><span class="c1">// join to materialize the subflow immediately</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">res1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">res2</span><span class="p">;</span>
<span class="p">}</span>
<span class="w">  </span>
<span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="n">res</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sbf</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">  </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spawn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">sbf</span><span class="p">);</span><span class="w">  </span>
<span class="p">});</span>

<span class="n">executor</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">taskflow</span><span class="p">).</span><span class="n">wait</span><span class="p">();</span></pre><p>The code above computes the fifth Fibonacci number using recursive subflow. Calling <a href="classtf_1_1Subflow.html#a59fcac1323e70d920088dd37bd0be245" class="m-doc">tf::<wbr />Subflow::<wbr />join</a> <em>immediately</em> materializes the subflow by executing all associated tasks to recursively compute Fibonacci numbers. The taskflow graph is shown below:</p><div class="m-graph"><svg style="width: 67.000rem; height: 52.700rem;" viewBox="0.00 0.00 670.00 526.75">
<g transform="scale(1 1) rotate(0) translate(4 522.75)">
<title>Taskflow</title>
<g class="m-cluster">
<title>cluster_p0x7ffd972c0cd0</title>
<polygon points="8,-8 8,-510.75 654,-510.75 654,-8 8,-8"/>
<text text-anchor="middle" x="331" y="-497.25" font-family="Helvetica,sans-Serif" font-size="10.00">Taskflow: fibonacci</text>
</g>
<g class="m-cluster">
<title>cluster_p0xa445c0</title>
<polygon points="16,-16 16,-483.5 646,-483.5 646,-16 16,-16"/>
<text text-anchor="middle" x="331" y="-470" font-family="Helvetica,sans-Serif" font-size="10.00">Subflow: 5</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fe918000b90</title>
<polygon points="24,-88 24,-456.25 410,-456.25 410,-88 24,-88"/>
<text text-anchor="middle" x="217" y="-442.75" font-family="Helvetica,sans-Serif" font-size="10.00">Subflow: 4</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fe910000b90</title>
<polygon points="32,-160 32,-429 252,-429 252,-160 32,-160"/>
<text text-anchor="middle" x="142" y="-415.5" font-family="Helvetica,sans-Serif" font-size="10.00">Subflow: 3</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fe918000fe0</title>
<polygon points="40,-232 40,-401.75 182,-401.75 182,-232 40,-232"/>
<text text-anchor="middle" x="111" y="-388.25" font-family="Helvetica,sans-Serif" font-size="10.00">Subflow: 2</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fe910000c48</title>
<polygon points="260,-160 260,-303.25 402,-303.25 402,-160 260,-160"/>
<text text-anchor="middle" x="331" y="-289.75" font-family="Helvetica,sans-Serif" font-size="10.00">Subflow: 2</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fe918000c48</title>
<polygon points="418,-88 418,-330.5 638,-330.5 638,-88 418,-88"/>
<text text-anchor="middle" x="528" y="-317" font-family="Helvetica,sans-Serif" font-size="10.00">Subflow: 3</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fe918000d00</title>
<polygon points="426,-160 426,-303.25 568,-303.25 568,-160 426,-160"/>
<text text-anchor="middle" x="497" y="-289.75" font-family="Helvetica,sans-Serif" font-size="10.00">Subflow: 2</text>
</g>
<g class="m-node m-flat">
<title>p0xa445c0</title>
<ellipse cx="413" cy="-42" rx="27" ry="18"/>
<text text-anchor="middle" x="413" y="-38.12" font-family="Helvetica,sans-Serif" font-size="10.00">5</text>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000b90</title>
<ellipse cx="331" cy="-114" rx="27" ry="18"/>
<text text-anchor="middle" x="331" y="-110.12" font-family="Helvetica,sans-Serif" font-size="10.00">4</text>
</g>
<g class="m-edge">
<title>p0x7fe918000b90&#45;&gt;p0xa445c0</title>
<path d="M347.2,-99.17C358.88,-89.2 374.86,-75.56 388.15,-64.21"/>
<polygon points="390.35,-66.94 395.68,-57.78 385.8,-61.61 390.35,-66.94"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe910000b90</title>
<ellipse cx="217" cy="-186" rx="27" ry="18"/>
<text text-anchor="middle" x="217" y="-182.12" font-family="Helvetica,sans-Serif" font-size="10.00">3</text>
</g>
<g class="m-edge">
<title>p0x7fe910000b90&#45;&gt;p0x7fe918000b90</title>
<path d="M235.97,-172.68C242.31,-168.6 249.44,-164.07 256,-160 270.95,-150.72 287.73,-140.63 301.63,-132.35"/>
<polygon points="303.05,-135.57 309.86,-127.46 299.48,-129.56 303.05,-135.57"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000fe0</title>
<ellipse cx="145" cy="-258" rx="27" ry="18"/>
<text text-anchor="middle" x="145" y="-254.12" font-family="Helvetica,sans-Serif" font-size="10.00">2</text>
</g>
<g class="m-edge">
<title>p0x7fe918000fe0&#45;&gt;p0x7fe910000b90</title>
<path d="M159.92,-242.5C169.77,-232.92 182.86,-220.19 194.03,-209.34"/>
<polygon points="196.29,-212.02 201.02,-202.54 191.41,-207 196.29,-212.02"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918001150</title>
<ellipse cx="75" cy="-356.5" rx="27" ry="18"/>
<text text-anchor="middle" x="75" y="-352.62" font-family="Helvetica,sans-Serif" font-size="10.00">1</text>
</g>
<g class="m-edge">
<title>p0x7fe918001150&#45;&gt;p0x7fe918000fe0</title>
<path d="M86.25,-340C97.2,-324.89 114.04,-301.68 126.89,-283.97"/>
<polygon points="129.62,-286.16 132.66,-276.01 123.96,-282.05 129.62,-286.16"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918001208</title>
<ellipse cx="147" cy="-356.5" rx="27" ry="18"/>
<text text-anchor="middle" x="147" y="-352.62" font-family="Helvetica,sans-Serif" font-size="10.00">0</text>
</g>
<g class="m-edge">
<title>p0x7fe918001208&#45;&gt;p0x7fe918000fe0</title>
<path d="M146.64,-338.25C146.35,-324.2 145.93,-304.08 145.59,-287.62"/>
<polygon points="149.1,-287.87 145.39,-277.94 142.1,-288.01 149.1,-287.87"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918001098</title>
<ellipse cx="217" cy="-258" rx="27" ry="18"/>
<text text-anchor="middle" x="217" y="-254.12" font-family="Helvetica,sans-Serif" font-size="10.00">1</text>
</g>
<g class="m-edge">
<title>p0x7fe918001098&#45;&gt;p0x7fe910000b90</title>
<path d="M217,-239.7C217,-232.41 217,-223.73 217,-215.54"/>
<polygon points="220.5,-215.62 217,-205.62 213.5,-215.62 220.5,-215.62"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe910000c48</title>
<ellipse cx="331" cy="-186" rx="27" ry="18"/>
<text text-anchor="middle" x="331" y="-182.12" font-family="Helvetica,sans-Serif" font-size="10.00">2</text>
</g>
<g class="m-edge">
<title>p0x7fe910000c48&#45;&gt;p0x7fe918000b90</title>
<path d="M331,-167.7C331,-160.41 331,-151.73 331,-143.54"/>
<polygon points="334.5,-143.62 331,-133.62 327.5,-143.62 334.5,-143.62"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe910000d00</title>
<ellipse cx="295" cy="-258" rx="27" ry="18"/>
<text text-anchor="middle" x="295" y="-254.12" font-family="Helvetica,sans-Serif" font-size="10.00">1</text>
</g>
<g class="m-edge">
<title>p0x7fe910000d00&#45;&gt;p0x7fe910000c48</title>
<path d="M303.35,-240.76C307.58,-232.55 312.81,-222.37 317.58,-213.09"/>
<polygon points="320.54,-214.99 322,-204.49 314.32,-211.79 320.54,-214.99"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe910000db8</title>
<ellipse cx="367" cy="-258" rx="27" ry="18"/>
<text text-anchor="middle" x="367" y="-254.12" font-family="Helvetica,sans-Serif" font-size="10.00">0</text>
</g>
<g class="m-edge">
<title>p0x7fe910000db8&#45;&gt;p0x7fe910000c48</title>
<path d="M358.65,-240.76C354.42,-232.55 349.19,-222.37 344.42,-213.09"/>
<polygon points="347.68,-211.79 340,-204.49 341.46,-214.99 347.68,-211.79"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000c48</title>
<ellipse cx="496" cy="-114" rx="27" ry="18"/>
<text text-anchor="middle" x="496" y="-110.12" font-family="Helvetica,sans-Serif" font-size="10.00">3</text>
</g>
<g class="m-edge">
<title>p0x7fe918000c48&#45;&gt;p0xa445c0</title>
<path d="M479.6,-99.17C467.78,-89.2 451.6,-75.56 438.15,-64.21"/>
<polygon points="440.42,-61.55 430.52,-57.78 435.91,-66.9 440.42,-61.55"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000d00</title>
<ellipse cx="496" cy="-186" rx="27" ry="18"/>
<text text-anchor="middle" x="496" y="-182.12" font-family="Helvetica,sans-Serif" font-size="10.00">2</text>
</g>
<g class="m-edge">
<title>p0x7fe918000d00&#45;&gt;p0x7fe918000c48</title>
<path d="M496,-167.7C496,-160.41 496,-151.73 496,-143.54"/>
<polygon points="499.5,-143.62 496,-133.62 492.5,-143.62 499.5,-143.62"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000e70</title>
<ellipse cx="461" cy="-258" rx="27" ry="18"/>
<text text-anchor="middle" x="461" y="-254.12" font-family="Helvetica,sans-Serif" font-size="10.00">1</text>
</g>
<g class="m-edge">
<title>p0x7fe918000e70&#45;&gt;p0x7fe918000d00</title>
<path d="M469.29,-240.41C473.3,-232.39 478.22,-222.57 482.73,-213.54"/>
<polygon points="485.75,-215.33 487.09,-204.82 479.49,-212.2 485.75,-215.33"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000f28</title>
<ellipse cx="533" cy="-258" rx="27" ry="18"/>
<text text-anchor="middle" x="533" y="-254.12" font-family="Helvetica,sans-Serif" font-size="10.00">0</text>
</g>
<g class="m-edge">
<title>p0x7fe918000f28&#45;&gt;p0x7fe918000d00</title>
<path d="M524.42,-240.76C520.08,-232.55 514.7,-222.37 509.79,-213.09"/>
<polygon points="513.01,-211.69 505.24,-204.49 506.82,-214.96 513.01,-211.69"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000db8</title>
<ellipse cx="603" cy="-186" rx="27" ry="18"/>
<text text-anchor="middle" x="603" y="-182.12" font-family="Helvetica,sans-Serif" font-size="10.00">1</text>
</g>
<g class="m-edge">
<title>p0x7fe918000db8&#45;&gt;p0x7fe918000c48</title>
<path d="M586.93,-171.31C582.22,-167.51 577,-163.47 572,-160 557.4,-149.87 540.45,-139.69 526.26,-131.58"/>
<polygon points="528.24,-128.68 517.81,-126.82 524.8,-134.78 528.24,-128.68"/>
</g>
</g>
</svg>
</div><aside class="m-note m-warning"><h4>Attention</h4><p>Using <a href="classtf_1_1Subflow.html" class="m-doc">tf::<wbr />Subflow</a> to implement recursive parallelism like finding Fibonacci numbers may not be as efficient as <a href="classtf_1_1Runtime.html" class="m-doc">tf::<wbr />Runtime</a> due to additional task graph overhead. For more details, readers can refer to <a href="fibonacci.html" class="m-doc">Fibonacci Number</a>.</p></aside></section><section id="CreateANestedSubflow"><h2><a href="#CreateANestedSubflow">Create a Nested Subflow</a></h2><p>A subflow can be nested or recursive. You can create another subflow from the execution of a subflow and so on.</p><pre class="m-code"><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span>
<span class="w"> </span><span class="mi">2</span><span class="o">:</span>
<span class="w"> </span><span class="mi">3</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sf</span><span class="p">){</span>
<span class="w"> </span><span class="mi">4</span><span class="o">:</span><span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;A spawns A1 &amp; subflow A2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w"> </span><span class="mi">5</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sf</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="mi">6</span><span class="o">:</span><span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;subtask A1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w"> </span><span class="mi">7</span><span class="o">:</span><span class="w">   </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A1&quot;</span><span class="p">);</span>
<span class="w"> </span><span class="mi">8</span><span class="o">:</span>
<span class="w"> </span><span class="mi">9</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sf</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sf2</span><span class="p">){</span>
<span class="mi">10</span><span class="o">:</span><span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;A2 spawns A2_1 &amp; A2_2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="mi">11</span><span class="o">:</span><span class="w">     </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A2_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sf2</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="mi">12</span><span class="o">:</span><span class="w">       </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;subtask A2_1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="mi">13</span><span class="o">:</span><span class="w">     </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A2_1&quot;</span><span class="p">);</span>
<span class="mi">14</span><span class="o">:</span><span class="w">     </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A2_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sf2</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="mi">15</span><span class="o">:</span><span class="w">       </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;subtask A2_2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="mi">16</span><span class="o">:</span><span class="w">     </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A2_2&quot;</span><span class="p">);</span>
<span class="mi">17</span><span class="o">:</span><span class="w">     </span><span class="n">A2_1</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">A2_2</span><span class="p">);</span>
<span class="mi">18</span><span class="o">:</span><span class="w">   </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">);</span>
<span class="mi">19</span><span class="o">:</span><span class="w">   </span><span class="n">A1</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">A2</span><span class="p">);</span>
<span class="mi">20</span><span class="o">:</span><span class="w"> </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">);</span>
<span class="mi">21</span><span class="o">:</span>
<span class="mi">22</span><span class="o">:</span><span class="w"> </span><span class="c1">// execute the graph to spawn the subflow</span>
<span class="mi">23</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Executor</span><span class="p">().</span><span class="n">run</span><span class="p">(</span><span class="n">taskflow</span><span class="p">).</span><span class="n">get</span><span class="p">();</span></pre><div class="m-graph"><svg style="width: 38.800rem; height: 20.900rem;" viewBox="0.00 0.00 388.00 209.00">
<g transform="scale(1 1) rotate(0) translate(4 205)">
<title>Taskflow</title>
<g class="m-cluster">
<title>cluster_p0x7ffeeca03810</title>
<polygon points="8,-8 8,-193 372,-193 372,-8 8,-8"/>
<text text-anchor="middle" x="190" y="-179.5" font-family="Helvetica,sans-Serif" font-size="10.00">Taskflow</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fbc40c02830</title>
<polygon points="16,-16 16,-166 364,-166 364,-16 16,-16"/>
<text text-anchor="middle" x="190" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00">Subflow: A</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fbc40d00240</title>
<polygon points="24,-24 24,-95 274,-95 274,-24 24,-24"/>
<text text-anchor="middle" x="149" y="-81.5" font-family="Helvetica,sans-Serif" font-size="10.00">Subflow: A2</text>
</g>
<g class="m-node m-flat">
<title>p0x7fbc40c02830</title>
<ellipse cx="329" cy="-50" rx="27" ry="18"/>
<text text-anchor="middle" x="329" y="-46.12" font-family="Helvetica,sans-Serif" font-size="10.00">A</text>
</g>
<g class="m-node m-flat">
<title>p0x7fbc40d00120</title>
<ellipse cx="149" cy="-121" rx="27" ry="18"/>
<text text-anchor="middle" x="149" y="-117.12" font-family="Helvetica,sans-Serif" font-size="10.00">A1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fbc40d00240</title>
<ellipse cx="239" cy="-50" rx="27" ry="18"/>
<text text-anchor="middle" x="239" y="-46.12" font-family="Helvetica,sans-Serif" font-size="10.00">A2</text>
</g>
<g class="m-edge">
<title>p0x7fbc40d00120&#45;&gt;p0x7fbc40d00240</title>
<path d="M166.97,-107.31C179.87,-96.9 197.84,-82.4 212.48,-70.59"/>
<polygon points="214.32,-73.6 219.91,-64.6 209.93,-68.15 214.32,-73.6"/>
</g>
<g class="m-edge">
<title>p0x7fbc40d00240&#45;&gt;p0x7fbc40c02830</title>
<path d="M266.4,-50C273.89,-50 282.18,-50 290.2,-50"/>
<polygon points="290.1,-53.5 300.1,-50 290.1,-46.5 290.1,-53.5"/>
</g>
<g class="m-node m-flat">
<title>p0x7fbc40d00360</title>
<ellipse cx="59" cy="-50" rx="27" ry="18"/>
<text text-anchor="middle" x="59" y="-46.12" font-family="Helvetica,sans-Serif" font-size="10.00">A2_1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fbc40d00470</title>
<ellipse cx="149" cy="-50" rx="27" ry="18"/>
<text text-anchor="middle" x="149" y="-46.12" font-family="Helvetica,sans-Serif" font-size="10.00">A2_2</text>
</g>
<g class="m-edge">
<title>p0x7fbc40d00360&#45;&gt;p0x7fbc40d00470</title>
<path d="M86.4,-50C93.89,-50 102.18,-50 110.2,-50"/>
<polygon points="110.1,-53.5 120.1,-50 110.1,-46.5 110.1,-53.5"/>
</g>
<g class="m-edge">
<title>p0x7fbc40d00470&#45;&gt;p0x7fbc40d00240</title>
<path d="M176.4,-50C183.89,-50 192.18,-50 200.2,-50"/>
<polygon points="200.1,-53.5 210.1,-50 200.1,-46.5 200.1,-53.5"/>
</g>
</g>
</svg>
</div><p>Debrief:</p><ul><li>Line 1 creates a taskflow object</li><li>Lines 3-20 create a task to spawn a subflow of two tasks A1 and A2</li><li>Lines 9-18 spawn another subflow of two tasks A2_1 and A2_2 out of its parent task A2</li><li>Lines 23 runs the defined taskflow graph</li></ul><aside class="m-note m-warning"><h4>Attention</h4><p>To properly visualize subflows, you must call <a href="classtf_1_1Subflow.html#ac585638d8ca8fb2f34c4826cb0d4f39f" class="m-doc">tf::<wbr />Subflow::<wbr />retain</a> on each subflow and execute the taskflow once to ensure all associated subflows are spawned.</p></aside></section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Taskflow handbook is part of the <a href="https://taskflow.github.io">Taskflow project</a>, copyright © <a href="https://tsung-wei-huang.github.io/">Dr. Tsung-Wei Huang</a>, 2018&ndash;2025.<br />Generated by <a href="https://doxygen.org/">Doxygen</a> 1.12.0 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
