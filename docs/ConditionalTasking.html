<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cookbook &raquo; Conditional Tasking | Taskflow QuickStart</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="https://taskflow.github.io"><img src="taskflow_logo.png" alt="" />Taskflow</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">QuickStart</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Handbook</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="Cookbook.html">Cookbook</a> &raquo;</span>
          Conditional Tasking
        </h1>
        <nav class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li><a href="#CreateAConditionTask">Create a Condition Task</a></li>
            <li>
              <a href="#TaskSchedulingPolicy">Understand our Task-level Scheduling</a>
              <ul>
                <li><a href="#TaskLevelSchedulingExample">Example</a></li>
              </ul>
            </li>
            <li><a href="#AvoidCommonPitfalls">Avoid Common Pitfalls</a></li>
            <li>
              <a href="#ImplementControlFlowGraphs">Implement Control-flow Graphs</a>
              <ul>
                <li><a href="#ImplementIfElseControlFlow">Implement If-Else Control Flow</a></li>
                <li><a href="#ImplementSwitchControlFlow">Implement Switch Control Flow</a></li>
                <li><a href="#ImplementDoWhileLoopControlFlow">Implement Do-While-Loop Control Flow</a></li>
                <li><a href="#ImplementWhileLoopControlFlow">Implement While-Loop Control Flow</a></li>
              </ul>
            </li>
            <li><a href="#CreateAMultiConditionTask">Create a Multi-condition Task</a></li>
          </ul>
        </nav>
<p>Parallel workloads often require making control-flow decisions across dependent tasks. Taskflow supports an very efficient interface of conditional tasking for users to implement general control flow such as dynamic flow, cycles, and conditionals that are otherwise difficult to do with existing frameworks.</p><section id="CreateAConditionTask"><h2><a href="#CreateAConditionTask">Create a Condition Task</a></h2><p>A condition task evalutes a set of instructions and returns an integer index of the next successor task to execute. The index is defined with respect to the order of its successor construction. The following example creates an if-else block using a single condition task.</p><pre class="m-code"><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>
<span class="w"> </span><span class="mi">2</span><span class="o">:</span><span class="w"></span>
<span class="w"> </span><span class="mi">3</span><span class="o">:</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="p">[</span><span class="n">init</span><span class="p">,</span><span class="w"> </span><span class="n">cond</span><span class="p">,</span><span class="w"> </span><span class="n">yes</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="w"></span>
<span class="w"> </span><span class="mi">4</span><span class="o">:</span><span class="w">  </span><span class="p">[]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w"> </span><span class="mi">5</span><span class="o">:</span><span class="w">  </span><span class="p">[]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w"> </span><span class="mi">6</span><span class="o">:</span><span class="w">  </span><span class="p">[]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;yes</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w"> </span><span class="mi">7</span><span class="o">:</span><span class="w">  </span><span class="p">[]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;no</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w"> </span><span class="mi">8</span><span class="o">:</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w"> </span><span class="mi">9</span><span class="o">:</span><span class="w"></span>
<span class="mi">10</span><span class="o">:</span><span class="w"> </span><span class="n">cond</span><span class="p">.</span><span class="n">succeed</span><span class="p">(</span><span class="n">init</span><span class="p">)</span><span class="w"></span>
<span class="mi">11</span><span class="o">:</span><span class="w">     </span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">yes</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="p">);</span><span class="w">  </span><span class="c1">// executes yes if cond returns 0</span>
<span class="mi">12</span><span class="o">:</span><span class="w">                         </span><span class="c1">// executes no  if cond returns 1</span></pre><div class="m-graph"><svg style="width: 26.300rem; height: 9.800rem;" viewBox="0.00 0.00 262.60 98.00">
<g transform="scale(1 1) rotate(0) translate(4 94)">
<title>Taskflow</title>
<g class="m-node m-flat">
<title>p0x7f9e1e700030</title>
<ellipse cx="27" cy="-45" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-42.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">init</text>
</g>
<g class="m-node">
<title>p0x7f9e1e700140</title>
<polygon points="124.2998,-63 91.199,-45 124.2998,-27 157.4006,-45 124.2998,-63"/>
<text text-anchor="middle" x="124.2998" y="-42.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">cond</text>
</g>
<g class="m-edge">
<title>p0x7f9e1e700030&#45;&gt;p0x7f9e1e700140</title>
<path d="M54.1034,-45C62.4379,-45 71.8296,-45 80.9681,-45"/>
<polygon points="81.1081,-48.5001 91.1081,-45 81.1081,-41.5001 81.1081,-48.5001"/>
</g>
<g class="m-node m-flat">
<title>p0x7f9e1e700250</title>
<ellipse cx="227.5996" cy="-72" rx="27" ry="18"/>
<text text-anchor="middle" x="227.5996" y="-69.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">yes</text>
</g>
<g class="m-edge">
<title>p0x7f9e1e700140&#45;&gt;p0x7f9e1e700250</title>
<path stroke-dasharray="5,2" d="M146.7143,-50.8586C160.021,-54.3366 177.1878,-58.8236 192.2808,-62.7685"/>
<polygon points="191.7654,-66.2513 202.3255,-65.394 193.5356,-59.4789 191.7654,-66.2513"/>
<text text-anchor="middle" x="179.0996" y="-63" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>p0x7f9e1e700360</title>
<ellipse cx="227.5996" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="227.5996" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">no</text>
</g>
<g class="m-edge">
<title>p0x7f9e1e700140&#45;&gt;p0x7f9e1e700360</title>
<path stroke-dasharray="5,2" d="M146.7143,-39.1414C160.021,-35.6634 177.1878,-31.1764 192.2808,-27.2315"/>
<polygon points="193.5356,-30.5211 202.3255,-24.606 191.7654,-23.7487 193.5356,-30.5211"/>
<text text-anchor="middle" x="179.0996" y="-34" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
</g>
</svg>
</div><p>Line 5 creates a condition task <code>cond</code> and line 11 creates two dependencies from <code>cond</code> to two other tasks, <code>yes</code> and <code>no</code>. With this order, when <code>cond</code> returns 0, the execution moves on to task <code>yes</code>. When <code>cond</code> returns 1, the execution moves on to task <code>no</code>.</p><aside class="m-note m-warning"><h4>Attention</h4><p>It is your responsibility to ensure the return of a condition task goes to a correct successor task. If the return falls beyond the range of the successors, the executor will not schedule any tasks.</p></aside><p>Condition task can go cyclic to describe <em>iterative</em> control flow. The example below implements a simple yet commonly used feedback loop through a condition task (line 7-10) that returns a random binary value. If the return value from <code>cond</code> is <code>0</code>, it loops back to itself, or otherwise to <code>stop</code>.</p><pre class="m-code"><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>
<span class="w"> </span><span class="mi">2</span><span class="o">:</span><span class="w"> </span>
<span class="w"> </span><span class="mi">3</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;init&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w"> </span><span class="mi">4</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;stop&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w"> </span><span class="mi">5</span><span class="o">:</span><span class="w"></span>
<span class="w"> </span><span class="mi">6</span><span class="o">:</span><span class="w"> </span><span class="c1">// creates a condition task that returns 0 or 1</span>
<span class="w"> </span><span class="mi">7</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">cond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){</span><span class="w"></span>
<span class="w"> </span><span class="mi">8</span><span class="o">:</span><span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;flipping a coin</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w"> </span><span class="mi">9</span><span class="o">:</span><span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">rand</span><span class="p">()</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="mi">10</span><span class="o">:</span><span class="w"> </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;cond&quot;</span><span class="p">);</span><span class="w"></span>
<span class="mi">11</span><span class="o">:</span><span class="w"></span>
<span class="mi">12</span><span class="o">:</span><span class="w"> </span><span class="c1">// creates a feedback loop {0: cond, 1: stop}</span>
<span class="mi">13</span><span class="o">:</span><span class="w"> </span><span class="n">init</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">cond</span><span class="p">);</span><span class="w"></span>
<span class="mi">14</span><span class="o">:</span><span class="w"> </span><span class="n">cond</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">cond</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="p">);</span><span class="w">  </span><span class="c1">// returns 0 to &#39;cond&#39; or 1 to &#39;stop&#39;</span>
<span class="mi">15</span><span class="o">:</span><span class="w"></span>
<span class="mi">16</span><span class="o">:</span><span class="w"> </span><span class="n">executor</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">taskflow</span><span class="p">).</span><span class="n">wait</span><span class="p">();</span><span class="w"></span></pre><div class="m-graph"><svg style="width: 26.300rem; height: 7.300rem;" viewBox="0.00 0.00 262.60 73.00">
<g transform="scale(1 1) rotate(0) translate(4 69)">
<title>Taskflow</title>
<g class="m-node">
<title>cond</title>
<polygon points="124.2998,-36 91.199,-18 124.2998,0 157.4006,-18 124.2998,-36"/>
<text text-anchor="middle" x="124.2998" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">cond</text>
</g>
<g class="m-edge">
<title>cond&#45;&gt;cond</title>
<path stroke-dasharray="5,2" d="M116.2432,-31.667C113.0205,-42.6563 115.7061,-54 124.2998,-54 130.208,-54 133.3237,-48.6383 133.6468,-41.7163"/>
<polygon points="137.1016,-41.1398 132.3564,-31.667 130.1586,-42.0313 137.1016,-41.1398"/>
<text text-anchor="middle" x="124.2998" y="-57" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>stop</title>
<ellipse cx="227.5996" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="227.5996" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">stop</text>
</g>
<g class="m-edge">
<title>cond&#45;&gt;stop</title>
<path stroke-dasharray="5,2" d="M157.5531,-18C167.9041,-18 179.3891,-18 190.0144,-18"/>
<polygon points="190.2793,-21.5001 200.2793,-18 190.2793,-14.5001 190.2793,-21.5001"/>
<text text-anchor="middle" x="179.0996" y="-21" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>init</title>
<ellipse cx="27" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">init</text>
</g>
<g class="m-edge">
<title>init&#45;&gt;cond</title>
<path d="M54.1034,-18C62.4379,-18 71.8296,-18 80.9681,-18"/>
<polygon points="81.1081,-21.5001 91.1081,-18 81.1081,-14.5001 81.1081,-21.5001"/>
</g>
</g>
</svg>
</div><p>A taskflow of complex control flow often just takes a few lines of code to implement, and different control flow blocks may run in parallel. The code below creates another taskflow with three condition tasks.</p><pre class="m-code"><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>

<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;C&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;D&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;E&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;F&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;G&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">H</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;H&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;I&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;K&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;L&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;M&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">cond_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">rand</span><span class="p">()</span><span class="o">%</span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;cond_1&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">cond_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">rand</span><span class="p">()</span><span class="o">%</span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;cond_2&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">cond_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">rand</span><span class="p">()</span><span class="o">%</span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;cond_3&quot;</span><span class="p">);</span><span class="w"></span>

<span class="n">A</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">F</span><span class="p">);</span><span class="w"></span>
<span class="n">B</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">C</span><span class="p">);</span><span class="w"></span>
<span class="n">C</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">D</span><span class="p">);</span><span class="w"></span>
<span class="n">D</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">cond_1</span><span class="p">);</span><span class="w"></span>
<span class="n">E</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">K</span><span class="p">);</span><span class="w"></span>
<span class="n">F</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">cond_2</span><span class="p">);</span><span class="w"></span>
<span class="n">H</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">I</span><span class="p">);</span><span class="w"></span>
<span class="n">I</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">cond_3</span><span class="p">);</span><span class="w"></span>
<span class="n">L</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">M</span><span class="p">);</span><span class="w"></span>

<span class="n">cond_1</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p">);</span><span class="w">       </span><span class="c1">// return 0 to &#39;B&#39; or 1 to &#39;E&#39;</span>
<span class="n">cond_2</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">G</span><span class="p">,</span><span class="w"> </span><span class="n">H</span><span class="p">);</span><span class="w">       </span><span class="c1">// return 0 to &#39;G&#39; or 1 to &#39;H&#39;</span>
<span class="n">cond_3</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">cond_3</span><span class="p">,</span><span class="w"> </span><span class="n">L</span><span class="p">);</span><span class="w">  </span><span class="c1">// return 0 to &#39;cond_3&#39; or 1 to &#39;L&#39;</span>

<span class="n">taskflow</span><span class="p">.</span><span class="n">dump</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span><span class="w"></span></pre><p>The above code creates three condition tasks: (1) a condition task <code>cond_1</code> that loops back to <code>B</code> on returning <code>0</code>, or proceeds to <code>E</code> on returning <code>1</code>, (2) a condition task <code>cond_2</code> that goes to <code>G</code> on returning <code>0</code>, or <code>H</code> on returning <code>1</code>, (3) a condition task <code>cond_3</code> that loops back to itself on returning <code>0</code>, or proceeds to <code>L</code> on returning <code>1</code></p><div class="m-graph"><svg style="width: 81.000rem; height: 19.200rem;" viewBox="0.00 0.00 809.74 192.00">
<g transform="scale(1 1) rotate(0) translate(4 188)">
<title>Taskflow</title>
<g class="m-node m-flat">
<title>p0x7fecbdc02830</title>
<ellipse cx="27" cy="-94" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-91.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A</text>
</g>
<g class="m-node m-flat">
<title>p0x7fecbdc02940</title>
<ellipse cx="118" cy="-122" rx="27" ry="18"/>
<text text-anchor="middle" x="118" y="-119.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc02830&#45;&gt;p0x7fecbdc02940</title>
<path d="M51.8661,-101.6511C61.6764,-104.6697 73.1102,-108.1878 83.6848,-111.4415"/>
<polygon points="82.8919,-114.8594 93.479,-114.4551 84.9505,-108.1689 82.8919,-114.8594"/>
</g>
<g class="m-node m-flat">
<title>p0x7fecbdc02d80</title>
<ellipse cx="118" cy="-68" rx="27" ry="18"/>
<text text-anchor="middle" x="118" y="-65.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">F</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc02830&#45;&gt;p0x7fecbdc02d80</title>
<path d="M51.8661,-86.8954C61.5966,-84.1152 72.9244,-80.8787 83.4267,-77.8781"/>
<polygon points="84.5102,-81.2086 93.1639,-75.096 82.5871,-74.478 84.5102,-81.2086"/>
</g>
<g class="m-node m-flat">
<title>p0x7fecbdc02a50</title>
<ellipse cx="224.4573" cy="-166" rx="27" ry="18"/>
<text text-anchor="middle" x="224.4573" y="-163.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">C</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc02940&#45;&gt;p0x7fecbdc02a50</title>
<path d="M141.0996,-131.5473C156.0265,-137.7168 175.6668,-145.8343 192.1336,-152.6403"/>
<polygon points="190.824,-155.8861 201.4027,-156.4713 193.4979,-149.4169 190.824,-155.8861"/>
</g>
<g class="m-node">
<title>p0x7fecbdc03600</title>
<polygon points="224.4573,-86 182.0427,-68 224.4573,-50 266.8718,-68 224.4573,-86"/>
<text text-anchor="middle" x="224.4573" y="-65.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">cond_2</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc02d80&#45;&gt;p0x7fecbdc03600</title>
<path d="M145.1391,-68C153.1956,-68 162.3115,-68 171.4199,-68"/>
<polygon points="171.6436,-71.5001 181.6435,-68 171.6435,-64.5001 171.6436,-71.5001"/>
</g>
<g class="m-node m-flat">
<title>p0x7fecbdc02b60</title>
<ellipse cx="336.9145" cy="-166" rx="27" ry="18"/>
<text text-anchor="middle" x="336.9145" y="-163.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">D</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc02a50&#45;&gt;p0x7fecbdc02b60</title>
<path d="M251.68,-166C265.9403,-166 283.6281,-166 299.1884,-166"/>
<polygon points="299.5527,-169.5001 309.5527,-166 299.5526,-162.5001 299.5527,-169.5001"/>
</g>
<g class="m-node">
<title>p0x7fecbdc034f0</title>
<polygon points="443.3718,-155 400.9572,-137 443.3718,-119 485.7863,-137 443.3718,-155"/>
<text text-anchor="middle" x="443.3718" y="-134.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">cond_1</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc02b60&#45;&gt;p0x7fecbdc034f0</title>
<path d="M362.1434,-159.1274C375.6319,-155.453 392.4738,-150.8651 407.3193,-146.821"/>
<polygon points="408.4837,-150.1315 417.2122,-144.1261 406.6439,-143.3776 408.4837,-150.1315"/>
</g>
<g class="m-edge">
<title>p0x7fecbdc034f0&#45;&gt;p0x7fecbdc02940</title>
<path stroke-dasharray="5,2" d="M404.9159,-135.2271C341.9336,-132.3236 217.5841,-126.5909 155.3371,-123.7213"/>
<polygon points="155.332,-120.2174 145.1814,-123.2531 155.0095,-127.21 155.332,-120.2174"/>
<text text-anchor="middle" x="288.4145" y="-132" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>p0x7fecbdc02c70</title>
<ellipse cx="571.2863" cy="-137" rx="27" ry="18"/>
<text text-anchor="middle" x="571.2863" y="-134.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">E</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc034f0&#45;&gt;p0x7fecbdc02c70</title>
<path stroke-dasharray="5,2" d="M485.9654,-137C501.4047,-137 518.7204,-137 533.6975,-137"/>
<polygon points="534.1296,-140.5001 544.1295,-137 534.1295,-133.5001 534.1296,-140.5001"/>
<text text-anchor="middle" x="507.329" y="-140" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fecbdc031c0</title>
<ellipse cx="683.7435" cy="-137" rx="27" ry="18"/>
<text text-anchor="middle" x="683.7435" y="-134.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">K</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc02c70&#45;&gt;p0x7fecbdc031c0</title>
<path d="M598.509,-137C612.7693,-137 630.4571,-137 646.0174,-137"/>
<polygon points="646.3817,-140.5001 656.3817,-137 646.3816,-133.5001 646.3817,-140.5001"/>
</g>
<g class="m-node m-flat">
<title>p0x7fecbdc02e90</title>
<ellipse cx="336.9145" cy="-72" rx="27" ry="18"/>
<text text-anchor="middle" x="336.9145" y="-69.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">G</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc03600&#45;&gt;p0x7fecbdc02e90</title>
<path stroke-dasharray="5,2" d="M263.7893,-69.399C275.4278,-69.813 288.131,-70.2648 299.6357,-70.674"/>
<polygon points="299.6811,-74.1778 309.7993,-71.0355 299.93,-67.1822 299.6811,-74.1778"/>
<text text-anchor="middle" x="288.4145" y="-73" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>p0x7fecbdc02fa0</title>
<ellipse cx="336.9145" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="336.9145" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">H</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc03600&#45;&gt;p0x7fecbdc02fa0</title>
<path stroke-dasharray="5,2" d="M245.346,-58.7126C262.0823,-51.2714 285.8433,-40.707 304.9665,-32.2045"/>
<polygon points="306.4902,-35.3575 314.2057,-28.0966 303.6462,-28.9612 306.4902,-35.3575"/>
<text text-anchor="middle" x="288.4145" y="-43" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fecbdc030b0</title>
<ellipse cx="443.3718" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="443.3718" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">I</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc02fa0&#45;&gt;p0x7fecbdc030b0</title>
<path d="M364.0536,-18C376.8169,-18 392.2391,-18 406.0782,-18"/>
<polygon points="406.2822,-21.5001 416.2822,-18 406.2822,-14.5001 406.2822,-21.5001"/>
</g>
<g class="m-node">
<title>p0x7fecbdc03710</title>
<polygon points="571.2863,-36 528.8717,-18 571.2863,0 613.7008,-18 571.2863,-36"/>
<text text-anchor="middle" x="571.2863" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">cond_3</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc030b0&#45;&gt;p0x7fecbdc03710</title>
<path d="M470.4991,-18C484.5281,-18 502.1435,-18 518.7069,-18"/>
<polygon points="518.8425,-21.5001 528.8425,-18 518.8425,-14.5001 518.8425,-21.5001"/>
</g>
<g class="m-edge">
<title>p0x7fecbdc03710&#45;&gt;p0x7fecbdc03710</title>
<path stroke-dasharray="5,2" d="M561.1626,-32.0417C557.3766,-42.9126 560.7511,-54 571.2863,-54 578.5292,-54 582.3876,-48.7595 582.8615,-41.9516"/>
<polygon points="586.3224,-41.4289 581.4099,-32.0417 579.3963,-42.4435 586.3224,-41.4289"/>
<text text-anchor="middle" x="571.2863" y="-57" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>p0x7fecbdc032d0</title>
<ellipse cx="683.7435" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="683.7435" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">L</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc03710&#45;&gt;p0x7fecbdc032d0</title>
<path stroke-dasharray="5,2" d="M613.8015,-18C624.5309,-18 635.9697,-18 646.422,-18"/>
<polygon points="646.4827,-21.5001 656.4826,-18 646.4826,-14.5001 646.4827,-21.5001"/>
<text text-anchor="middle" x="635.2435" y="-21" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fecbdc033e0</title>
<ellipse cx="774.7435" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="774.7435" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">M</text>
</g>
<g class="m-edge">
<title>p0x7fecbdc032d0&#45;&gt;p0x7fecbdc033e0</title>
<path d="M711.0465,-18C719.3248,-18 728.5653,-18 737.384,-18"/>
<polygon points="737.4598,-21.5001 747.4598,-18 737.4597,-14.5001 737.4598,-21.5001"/>
</g>
</g>
</svg>
</div><p>You can use condition tasks to create cycles as long as the graph does not introduce task race during execution. However, cycles are not allowed in non-condition tasks.</p><aside class="m-note m-info"><h4>Note</h4><p>Conditional tasking lets you make in-task control-flow decisions to enable <em>end-to-end</em> parallelism, instead of resorting to client-side partition or synchronizing your task graph at the decision points of control flow.</p></aside></section><section id="TaskSchedulingPolicy"><h2><a href="#TaskSchedulingPolicy">Understand our Task-level Scheduling</a></h2><p>In order to understand how an executor schedules condition tasks, we define two dependency types, <em>strong dependency</em> and <em>weak dependency</em>. A strong dependency is a preceding link from a non-condition task to another task. A weak dependency is a preceding link from a condition task to another task. The number of dependents of a task is the sum of strong dependency and weak dependency. The table below lists the strong dependency and weak dependency numbers of each task in the previous example.</p><table class="m-table"><thead><tr><th>task</th><th>strong dependency</th><th>weak dependency</th><th>dependents</th></tr></thead><tbody><tr><td>A</td><td>0</td><td>0</td><td>0</td></tr><tr><td>B</td><td>1</td><td>1</td><td>2</td></tr><tr><td>C</td><td>1</td><td>0</td><td>1</td></tr><tr><td>D</td><td>1</td><td>0</td><td>1</td></tr><tr><td>E</td><td>0</td><td>1</td><td>1</td></tr><tr><td>F</td><td>1</td><td>0</td><td>1</td></tr><tr><td>G</td><td>0</td><td>1</td><td>1</td></tr><tr><td>H</td><td>0</td><td>1</td><td>1</td></tr><tr><td>I</td><td>1</td><td>0</td><td>1</td></tr><tr><td>K</td><td>1</td><td>0</td><td>1</td></tr><tr><td>L</td><td>0</td><td>1</td><td>1</td></tr><tr><td>M</td><td>1</td><td>0</td><td>1</td></tr><tr><td>cond_1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>cond_2</td><td>1</td><td>0</td><td>1</td></tr><tr><td>cond_3</td><td>1</td><td>1</td><td>2</td></tr></tbody></table><p>You can query the number of strong dependents, the number of weak dependents, and the number of dependents of a task.</p><pre class="m-code"><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>
<span class="mi">2</span><span class="o">:</span><span class="w"> </span>
<span class="mi">3</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){});</span><span class="w"></span>
<span class="mi">4</span><span class="o">:</span><span class="w"> </span>
<span class="mi">5</span><span class="o">:</span><span class="w"> </span><span class="c1">// ... add more tasks and preceding links</span>
<span class="mi">6</span><span class="o">:</span><span class="w"></span>
<span class="mi">7</span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">task</span><span class="p">.</span><span class="n">num_dependents</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span><span class="w"></span>
<span class="mi">8</span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">task</span><span class="p">.</span><span class="n">num_strong_dependents</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span><span class="w"> </span>
<span class="mi">9</span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">task</span><span class="p">.</span><span class="n">num_weak_dependents</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span><span class="w"></span></pre><p>When you submit a task to an executor, the scheduler starts with tasks of <em>zero dependents</em> (both zero strong and weak dependencies) and continues to execute successive tasks whenever their <em>strong dependencies</em> are met. However, the scheduler skips this rule when executing a condition task and jumps directly to its successors indexed by the return value.</p><div class="m-graph"><svg style="width: 60.800rem; height: 34.600rem;" viewBox="0.00 0.00 607.80 346.00">
<g transform="scale(1 1) rotate(0) translate(4 342)">
<title>G</title>
<g class="m-node m-flat">
<title>atask</title>
<ellipse cx="368.9608" cy="-320" rx="32.9303" ry="18"/>
<text text-anchor="middle" x="368.9608" y="-317.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">a task T</text>
</g>
<g class="m-node">
<title>cond</title>
<polygon points="368.9608,-265 269.1619,-247 368.9608,-229 468.7597,-247 368.9608,-265"/>
<text text-anchor="middle" x="368.9608" y="-244.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">is T a condition task?</text>
</g>
<g class="m-edge">
<title>atask&#45;&gt;cond</title>
<path d="M368.9608,-301.9551C368.9608,-293.8828 368.9608,-284.1764 368.9608,-275.1817"/>
<polygon points="372.4609,-275.0903 368.9608,-265.0904 365.4609,-275.0904 372.4609,-275.0903"/>
</g>
<g class="m-node m-flat">
<title>invokeN</title>
<ellipse cx="316.9608" cy="-164" rx="37.1717" ry="18"/>
<text text-anchor="middle" x="316.9608" y="-161.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">invoke(T)</text>
</g>
<g class="m-edge">
<title>cond&#45;&gt;invokeN</title>
<path stroke-dasharray="5,2" d="M358.6873,-230.6019C351.4727,-219.0862 341.6703,-203.4401 333.3792,-190.2063"/>
<polygon points="336.2063,-188.1263 327.9311,-181.5102 330.2743,-191.8427 336.2063,-188.1263"/>
<text text-anchor="middle" x="353.4608" y="-203" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">no</text>
</g>
<g class="m-node m-flat">
<title>invokeY</title>
<ellipse cx="472.9608" cy="-164" rx="49.3954" ry="18"/>
<text text-anchor="middle" x="472.9608" y="-161.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">R = invoke(T)</text>
</g>
<g class="m-edge">
<title>cond&#45;&gt;invokeY</title>
<path stroke-dasharray="5,2" d="M387.5539,-232.1613C403.3618,-219.5454 426.3126,-201.2289 444.4426,-186.7597"/>
<polygon points="446.7577,-189.3902 452.3905,-180.4167 442.3912,-183.9189 446.7577,-189.3902"/>
<text text-anchor="middle" x="436.9608" y="-203" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">yes</text>
</g>
<g class="m-node m-flat">
<title>decrement</title>
<ellipse cx="188.9608" cy="-91" rx="188.9216" ry="18"/>
<text text-anchor="middle" x="188.9608" y="-88.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">decrement strong dependencies of each successor of T by one</text>
</g>
<g class="m-edge">
<title>invokeN&#45;&gt;decrement</title>
<path d="M292.885,-150.2693C274.8889,-140.0059 249.8806,-125.7433 228.9062,-113.7814"/>
<polygon points="230.6169,-110.7278 220.1964,-108.814 227.149,-116.8085 230.6169,-110.7278"/>
</g>
<g class="m-node m-flat">
<title>enqueueR</title>
<ellipse cx="497.9608" cy="-91" rx="101.6776" ry="18"/>
<text text-anchor="middle" x="497.9608" y="-88.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">enqueue the R&#45;th successor of T</text>
</g>
<g class="m-edge">
<title>invokeY&#45;&gt;enqueueR</title>
<path d="M479.1406,-145.9551C481.9651,-137.7074 485.374,-127.7536 488.5101,-118.5962"/>
<polygon points="491.8367,-119.685 491.7655,-109.0904 485.2143,-117.417 491.8367,-119.685"/>
</g>
<g class="m-node m-flat">
<title>enqueueS</title>
<ellipse cx="188.9608" cy="-18" rx="147.3317" ry="18"/>
<text text-anchor="middle" x="188.9608" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">enqueue successors of zero strong dpendencies</text>
</g>
<g class="m-edge">
<title>decrement&#45;&gt;enqueueS</title>
<path d="M188.9608,-72.9551C188.9608,-64.8828 188.9608,-55.1764 188.9608,-46.1817"/>
<polygon points="192.4609,-46.0903 188.9608,-36.0904 185.4609,-46.0904 192.4609,-46.0903"/>
</g>
</g>
</svg>
</div><p>Each task has an <em>atomic</em> join counter to keep track of strong dependents that are met at runtime. When a task completes, the join counter is restored to the task&#x27;s strong dependency number in the graph, such that the subsequent execution can reuse the counter again.</p><section id="TaskLevelSchedulingExample"><h3><a href="#TaskLevelSchedulingExample">Example</a></h3><p>Let&#x27;s take a look at an example to understand how task-level scheduling works. Suppose we have the following taskflow of one condition task <code>cond</code> that forms a loop to itself on returning <code>0</code> and moves on to <code>stop</code> on returning <code>1</code>:</p><div class="m-graph"><svg style="width: 26.300rem; height: 7.300rem;" viewBox="0.00 0.00 262.60 73.00">
<g transform="scale(1 1) rotate(0) translate(4 69)">
<title>Taskflow</title>
<g class="m-node">
<title>cond</title>
<polygon points="124.2998,-36 91.199,-18 124.2998,0 157.4006,-18 124.2998,-36"/>
<text text-anchor="middle" x="124.2998" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">cond</text>
</g>
<g class="m-edge">
<title>cond&#45;&gt;cond</title>
<path stroke-dasharray="5,2" d="M116.2432,-31.667C113.0205,-42.6563 115.7061,-54 124.2998,-54 130.208,-54 133.3237,-48.6383 133.6468,-41.7163"/>
<polygon points="137.1016,-41.1398 132.3564,-31.667 130.1586,-42.0313 137.1016,-41.1398"/>
<text text-anchor="middle" x="124.2998" y="-57" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>stop</title>
<ellipse cx="227.5996" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="227.5996" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">stop</text>
</g>
<g class="m-edge">
<title>cond&#45;&gt;stop</title>
<path stroke-dasharray="5,2" d="M157.5531,-18C167.9041,-18 179.3891,-18 190.0144,-18"/>
<polygon points="190.2793,-21.5001 200.2793,-18 190.2793,-14.5001 190.2793,-21.5001"/>
<text text-anchor="middle" x="179.0996" y="-21" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>init</title>
<ellipse cx="27" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">init</text>
</g>
<g class="m-edge">
<title>init&#45;&gt;cond</title>
<path d="M54.1034,-18C62.4379,-18 71.8296,-18 80.9681,-18"/>
<polygon points="81.1081,-21.5001 91.1081,-18 81.1081,-14.5001 81.1081,-21.5001"/>
</g>
</g>
</svg>
</div><p>The scheduler starts with <code>init</code> task because it has no dependencies (both strong and weak dependencies). Then, the scheduler moves on to the condition task <code>cond</code>. If <code>cond</code> returns <code>0</code>, the scheduler enqueues <code>cond</code> and runs it again. If <code>cond</code> returns <code>1</code>, the scheduler enqueues <code>stop</code> and then moves on.</p></section></section><section id="AvoidCommonPitfalls"><h2><a href="#AvoidCommonPitfalls">Avoid Common Pitfalls</a></h2><p>Condition tasks are handy in creasing dynamic and cyclic control flows, but they are also easy to make mistakes. It is your responsibility to ensure a taskflow is properly conditioned. Top things to avoid include <em>no source tasks</em> to start with and <em>task race</em>. The figure below shows common pitfalls and their remedies.</p><div class="m-graph"><svg style="width: 91.000rem; height: 33.700rem;" viewBox="0.00 0.00 910.00 337.00">
<g transform="scale(1 1) rotate(0) translate(4 333)">
<title>Taskflow</title>
<g class="m-cluster">
<title>cluster_error1</title>
<polygon points="8,-129 8,-321 150,-321 150,-129 8,-129"/>
<text text-anchor="middle" x="79" y="-309" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">error1: no source tasks</text>
</g>
<g class="m-cluster">
<title>cluster_fix1</title>
<polygon points="158,-8 158,-321 300,-321 300,-8 158,-8"/>
<text text-anchor="middle" x="229" y="-309" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">fix1: adds a source</text>
</g>
<g class="m-cluster">
<title>cluster_error2</title>
<polygon points="308,-129 308,-321 450,-321 450,-129 308,-129"/>
<text text-anchor="middle" x="379" y="-309" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">error2: race on D</text>
</g>
<g class="m-cluster">
<title>cluster_fix2</title>
<polygon points="458,-8 458,-321 672,-321 672,-8 458,-8"/>
<text text-anchor="middle" x="565" y="-309" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">fix2: adds an auxiliary task</text>
</g>
<g class="m-cluster">
<title>cluster_risky</title>
<polygon points="680,-129 680,-321 894,-321 894,-129 680,-129"/>
<text text-anchor="middle" x="787" y="-309" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">risky: X might be raced</text>
</g>
<g class="m-node">
<title>e1A</title>
<polygon points="64,-294 37,-276 64,-258 91,-276 64,-294"/>
<text text-anchor="middle" x="64" y="-273.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A</text>
</g>
<g class="m-edge">
<title>e1A&#45;&gt;e1A</title>
<path stroke-dasharray="5,2" d="M82.4896,-282.0233C95.7706,-283.9843 109,-281.9766 109,-276 109,-271.5643 101.7127,-269.3147 92.5255,-269.2514"/>
<polygon points="92.2112,-265.7649 82.4896,-269.9767 92.7159,-272.7467 92.2112,-265.7649"/>
<text text-anchor="middle" x="112.5" y="-273.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>e1B</title>
<ellipse cx="43" cy="-155" rx="27" ry="18"/>
<text text-anchor="middle" x="43" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B</text>
</g>
<g class="m-edge">
<title>e1A&#45;&gt;e1B</title>
<path stroke-dasharray="5,2" d="M61.1678,-259.6814C57.7698,-240.1024 52.0161,-206.9496 47.8936,-183.1967"/>
<polygon points="51.2872,-182.2813 46.1287,-173.0271 44.3903,-183.4783 51.2872,-182.2813"/>
<text text-anchor="middle" x="57.5" y="-213" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>e1C</title>
<ellipse cx="115" cy="-155" rx="27" ry="18"/>
<text text-anchor="middle" x="115" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">C</text>
</g>
<g class="m-edge">
<title>e1A&#45;&gt;e1C</title>
<path stroke-dasharray="5,2" d="M70.0506,-261.6446C78.3064,-242.0573 93.2586,-206.5826 103.6394,-181.9536"/>
<polygon points="106.9815,-183.0355 107.6403,-172.4612 100.5311,-180.3167 106.9815,-183.0355"/>
<text text-anchor="middle" x="94.5" y="-213" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">2</text>
</g>
<g class="m-node m-flat">
<title>f1S</title>
<ellipse cx="214" cy="-276" rx="27" ry="18"/>
<text text-anchor="middle" x="214" y="-273.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">S</text>
</g>
<g class="m-node">
<title>f1A</title>
<polygon points="214,-173 187,-155 214,-137 241,-155 214,-173"/>
<text text-anchor="middle" x="214" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A</text>
</g>
<g class="m-edge">
<title>f1S&#45;&gt;f1A</title>
<path d="M214,-257.8851C214,-238.1928 214,-206.4608 214,-183.439"/>
<polygon points="217.5001,-183.2387 214,-173.2388 210.5001,-183.2388 217.5001,-183.2387"/>
</g>
<g class="m-edge">
<title>f1A&#45;&gt;f1A</title>
<path stroke-dasharray="5,2" d="M232.4896,-161.0233C245.7706,-162.9843 259,-160.9766 259,-155 259,-150.5643 251.7127,-148.3147 242.5255,-148.2514"/>
<polygon points="242.2112,-144.7649 232.4896,-148.9767 242.7159,-151.7467 242.2112,-144.7649"/>
<text text-anchor="middle" x="262.5" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>f1B</title>
<ellipse cx="193" cy="-34" rx="27" ry="18"/>
<text text-anchor="middle" x="193" y="-31.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B</text>
</g>
<g class="m-edge">
<title>f1A&#45;&gt;f1B</title>
<path stroke-dasharray="5,2" d="M211.1678,-138.6814C207.7698,-119.1024 202.0161,-85.9496 197.8936,-62.1967"/>
<polygon points="201.2872,-61.2813 196.1287,-52.0271 194.3903,-62.4783 201.2872,-61.2813"/>
<text text-anchor="middle" x="207.5" y="-92" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>f1C</title>
<ellipse cx="265" cy="-34" rx="27" ry="18"/>
<text text-anchor="middle" x="265" y="-31.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">C</text>
</g>
<g class="m-edge">
<title>f1A&#45;&gt;f1C</title>
<path stroke-dasharray="5,2" d="M220.0506,-140.6446C228.3064,-121.0573 243.2586,-85.5826 253.6394,-60.9536"/>
<polygon points="256.9815,-62.0355 257.6403,-51.4612 250.5311,-59.3167 256.9815,-62.0355"/>
<text text-anchor="middle" x="244.5" y="-92" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">2</text>
</g>
<g class="m-node">
<title>e2C</title>
<polygon points="415,-294 388,-276 415,-258 442,-276 415,-294"/>
<text text-anchor="middle" x="415" y="-273.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">C</text>
</g>
<g class="m-node m-flat">
<title>e2D</title>
<ellipse cx="343" cy="-155" rx="27" ry="18"/>
<text text-anchor="middle" x="343" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">D</text>
</g>
<g class="m-edge">
<title>e2C&#45;&gt;e2D</title>
<path stroke-dasharray="5,2" d="M407.2947,-263.0509C395.6633,-243.5036 373.3862,-206.0657 358.3578,-180.8097"/>
<polygon points="361.3036,-178.9156 353.1822,-172.1117 355.288,-182.4952 361.3036,-178.9156"/>
<text text-anchor="middle" x="384.5" y="-213" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>e2F</title>
<ellipse cx="415" cy="-155" rx="27" ry="18"/>
<text text-anchor="middle" x="415" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">F</text>
</g>
<g class="m-edge">
<title>e2C&#45;&gt;e2F</title>
<path stroke-dasharray="5,2" d="M415,-257.8851C415,-238.1928 415,-206.4608 415,-183.439"/>
<polygon points="418.5001,-183.2387 415,-173.2388 411.5001,-183.2388 418.5001,-183.2387"/>
<text text-anchor="middle" x="418.5" y="-213" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>e2E</title>
<ellipse cx="343" cy="-276" rx="27" ry="18"/>
<text text-anchor="middle" x="343" y="-273.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">E</text>
</g>
<g class="m-edge">
<title>e2E&#45;&gt;e2D</title>
<path d="M343,-257.8851C343,-238.1928 343,-206.4608 343,-183.439"/>
<polygon points="346.5001,-183.2387 343,-173.2388 339.5001,-183.2388 346.5001,-183.2387"/>
</g>
<g class="m-node">
<title>f2C</title>
<polygon points="601,-294 574,-276 601,-258 628,-276 601,-294"/>
<text text-anchor="middle" x="601" y="-273.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">C</text>
</g>
<g class="m-node m-flat">
<title>f2Daux</title>
<ellipse cx="565" cy="-155" rx="27.1572" ry="18"/>
<text text-anchor="middle" x="565" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">D&#45;aux</text>
</g>
<g class="m-edge">
<title>f2C&#45;&gt;f2Daux</title>
<path stroke-dasharray="5,2" d="M596.4406,-260.6753C590.6132,-241.0887 580.4192,-206.8258 573.221,-182.6319"/>
<polygon points="576.5474,-181.5383 570.341,-172.9517 569.8381,-183.5346 576.5474,-181.5383"/>
<text text-anchor="middle" x="587.5" y="-213" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>f2F</title>
<ellipse cx="637" cy="-155" rx="27" ry="18"/>
<text text-anchor="middle" x="637" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">F</text>
</g>
<g class="m-edge">
<title>f2C&#45;&gt;f2F</title>
<path stroke-dasharray="5,2" d="M605.5594,-260.6753C611.3868,-241.0887 621.5808,-206.8258 628.779,-182.6319"/>
<polygon points="632.1619,-183.5346 631.659,-172.9517 625.4526,-181.5383 632.1619,-183.5346"/>
<text text-anchor="middle" x="623.5" y="-213" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>f2D</title>
<ellipse cx="529" cy="-34" rx="27" ry="18"/>
<text text-anchor="middle" x="529" y="-31.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">D</text>
</g>
<g class="m-edge">
<title>f2Daux&#45;&gt;f2D</title>
<path d="M559.6881,-137.146C553.7591,-117.218 544.0932,-84.7299 537.1938,-61.5404"/>
<polygon points="540.5401,-60.5139 534.3337,-51.9272 533.8308,-62.5101 540.5401,-60.5139"/>
</g>
<g class="m-node m-flat">
<title>f2E</title>
<ellipse cx="493" cy="-155" rx="27" ry="18"/>
<text text-anchor="middle" x="493" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">E</text>
</g>
<g class="m-edge">
<title>f2E&#45;&gt;f2D</title>
<path d="M498.3119,-137.146C504.2409,-117.218 513.9068,-84.7299 520.8062,-61.5404"/>
<polygon points="524.1692,-62.5101 523.6663,-51.9272 517.4599,-60.5139 524.1692,-62.5101"/>
</g>
<g class="m-node">
<title>rP</title>
<polygon points="838,-294 811,-276 838,-258 865,-276 838,-294"/>
<text text-anchor="middle" x="838" y="-273.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">P</text>
</g>
<g class="m-node m-flat">
<title>rQ</title>
<ellipse cx="859" cy="-155" rx="27" ry="18"/>
<text text-anchor="middle" x="859" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Q</text>
</g>
<g class="m-edge">
<title>rP&#45;&gt;rQ</title>
<path stroke-dasharray="5,2" d="M840.8322,-259.6814C844.2302,-240.1024 849.9839,-206.9496 854.1064,-183.1967"/>
<polygon points="857.6097,-183.4783 855.8713,-173.0271 850.7128,-182.2813 857.6097,-183.4783"/>
<text text-anchor="middle" x="852.5" y="-213" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>rX</title>
<ellipse cx="787" cy="-155" rx="27" ry="18"/>
<text text-anchor="middle" x="787" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">X</text>
</g>
<g class="m-edge">
<title>rP&#45;&gt;rX</title>
<path stroke-dasharray="5,2" d="M831.9494,-261.6446C823.6936,-242.0573 808.7414,-206.5826 798.3606,-181.9536"/>
<polygon points="801.4689,-180.3167 794.3597,-172.4612 795.0185,-183.0355 801.4689,-180.3167"/>
<text text-anchor="middle" x="817.5" y="-213" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node">
<title>rM</title>
<polygon points="745,-294 718,-276 745,-258 772,-276 745,-294"/>
<text text-anchor="middle" x="745" y="-273.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">M</text>
</g>
<g class="m-edge">
<title>rM&#45;&gt;rX</title>
<path stroke-dasharray="5,2" d="M750.15,-261.163C756.935,-241.6158 768.9976,-206.8642 777.4687,-182.4591"/>
<polygon points="780.8808,-183.3026 780.8535,-172.7078 774.2678,-181.0072 780.8808,-183.3026"/>
<text text-anchor="middle" x="770.5" y="-213" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>rN</title>
<ellipse cx="715" cy="-155" rx="27" ry="18"/>
<text text-anchor="middle" x="715" y="-152.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">N</text>
</g>
<g class="m-edge">
<title>rM&#45;&gt;rN</title>
<path stroke-dasharray="5,2" d="M741.078,-260.1814C736.208,-240.5391 727.8181,-206.6998 721.8709,-182.7127"/>
<polygon points="725.2142,-181.6528 719.4105,-172.789 718.4199,-183.3374 725.2142,-181.6528"/>
<text text-anchor="middle" x="733.5" y="-213" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
</g>
</svg>
</div><p>In the <code>error1</code> scenario, there is no source task for the scheduler to start with, and the simplest fix is to add a task <code>S</code> that has no dependents. In the <code>error2</code> scenario, <code>D</code> might be scheduled twice by <code>E</code> through the strong dependency and <code>C</code> through the weak dependency (on returning <code>1</code>). To fix this problem, you can add an auxiliary task <code>D-aux</code> to break the mixed use of strong dependency and weak dependency. In the risky scenario, task <code>X</code> may be raced by <code>M</code> and <code>P</code> if <code>M</code> returns <code>0</code> and P returns <code>1</code>.</p><aside class="m-note m-warning"><h4>Attention</h4><p>It is your responsibility to ensure a written taskflow graph is properly conditioned. We suggest that you <a href="ConditionalTasking.html#TaskSchedulingPolicy" class="m-doc">Understand our Task-level Scheduling</a> and infer if task race exists in the execution of your graph.</p></aside></section><section id="ImplementControlFlowGraphs"><h2><a href="#ImplementControlFlowGraphs">Implement Control-flow Graphs</a></h2><section id="ImplementIfElseControlFlow"><h3><a href="#ImplementIfElseControlFlow">Implement If-Else Control Flow</a></h3><p>You can use conditional tasking to implement if-else control flow. The following example creates a nested if-else control flow diagram that executes three condition tasks to check the range of <code>i</code>.</p><pre class="m-code"><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"></span>

<span class="c1">// create three condition tasks for nested control flow</span>
<span class="k">auto</span><span class="w"> </span><span class="n">initi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="p">});</span><span class="w"> </span>
<span class="k">auto</span><span class="w"> </span><span class="n">cond1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="o">&gt;</span><span class="mi">1</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">});</span><span class="w"> </span>
<span class="k">auto</span><span class="w"> </span><span class="n">cond2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="o">&gt;</span><span class="mi">2</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">});</span><span class="w"> </span>
<span class="k">auto</span><span class="w"> </span><span class="n">cond3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="o">&gt;</span><span class="mi">3</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">});</span><span class="w"> </span>
<span class="k">auto</span><span class="w"> </span><span class="n">equl1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;i=1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">});</span><span class="w"> </span>
<span class="k">auto</span><span class="w"> </span><span class="n">equl2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;i=2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">});</span><span class="w"> </span>
<span class="k">auto</span><span class="w"> </span><span class="n">equl3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;i=3</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">});</span><span class="w"> </span>
<span class="k">auto</span><span class="w"> </span><span class="n">grtr3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;i&gt;3</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">});</span><span class="w"> </span>

<span class="n">initi</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">cond1</span><span class="p">);</span><span class="w"></span>
<span class="n">cond1</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">equl1</span><span class="p">,</span><span class="w"> </span><span class="n">cond2</span><span class="p">);</span><span class="w">  </span><span class="c1">// goes to cond2 if i&gt;1</span>
<span class="n">cond2</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">equl2</span><span class="p">,</span><span class="w"> </span><span class="n">cond3</span><span class="p">);</span><span class="w">  </span><span class="c1">// goes to cond3 if i&gt;2</span>
<span class="n">cond3</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">equl3</span><span class="p">,</span><span class="w"> </span><span class="n">grtr3</span><span class="p">);</span><span class="w">  </span><span class="c1">// goes to grtr3 if i&gt;3</span></pre><div class="m-graph"><svg style="width: 81.100rem; height: 15.200rem;" viewBox="0.00 0.00 811.47 152.00">
<g transform="scale(1 1) rotate(0) translate(4 148)">
<title>Taskflow</title>
<g class="m-node m-flat">
<title>p0x7fc231700030</title>
<ellipse cx="27" cy="-99" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-96.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">init</text>
</g>
<g class="m-node">
<title>p0x7fc231700140</title>
<polygon points="179.2445,-117 90.7548,-99 179.2445,-81 267.7341,-99 179.2445,-117"/>
<text text-anchor="middle" x="179.2445" y="-96.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">cond1 (i&gt;1 ? 1 : 0)</text>
</g>
<g class="m-edge">
<title>p0x7fc231700030&#45;&gt;p0x7fc231700140</title>
<path d="M54.2183,-99C62.0896,-99 71.1708,-99 80.7725,-99"/>
<polygon points="80.9381,-102.5001 90.9381,-99 80.938,-95.5001 80.9381,-102.5001"/>
</g>
<g class="m-node m-flat">
<title>p0x7fc231700470</title>
<ellipse cx="398.7334" cy="-126" rx="27" ry="18"/>
<text text-anchor="middle" x="398.7334" y="-123.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">equl1</text>
</g>
<g class="m-edge">
<title>p0x7fc231700140&#45;&gt;p0x7fc231700470</title>
<path stroke-dasharray="5,2" d="M234.6308,-105.8132C274.4519,-110.7118 327.0474,-117.1817 361.835,-121.461"/>
<polygon points="361.673,-124.9674 372.0255,-122.7146 362.5277,-118.0198 361.673,-124.9674"/>
<text text-anchor="middle" x="288.989" y="-115" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node">
<title>p0x7fc231700250</title>
<polygon points="398.7334,-90 310.2438,-72 398.7334,-54 487.2231,-72 398.7334,-90"/>
<text text-anchor="middle" x="398.7334" y="-69.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">cond2 (i&gt;2 ? 1 : 0)</text>
</g>
<g class="m-edge">
<title>p0x7fc231700140&#45;&gt;p0x7fc231700250</title>
<path stroke-dasharray="5,2" d="M234.6308,-92.1868C264.6544,-88.4935 301.9397,-83.9069 333.3792,-80.0394"/>
<polygon points="333.867,-83.5059 343.3648,-78.8111 333.0123,-76.5583 333.867,-83.5059"/>
<text text-anchor="middle" x="288.989" y="-88" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fc231700580</title>
<ellipse cx="618.2224" cy="-99" rx="27" ry="18"/>
<text text-anchor="middle" x="618.2224" y="-96.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">equl2</text>
</g>
<g class="m-edge">
<title>p0x7fc231700250&#45;&gt;p0x7fc231700580</title>
<path stroke-dasharray="5,2" d="M454.1198,-78.8132C493.9409,-83.7118 546.5364,-90.1817 581.3239,-94.461"/>
<polygon points="581.162,-97.9674 591.5145,-95.7146 582.0167,-91.0198 581.162,-97.9674"/>
<text text-anchor="middle" x="508.4779" y="-88" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node">
<title>p0x7fc231700360</title>
<polygon points="618.2224,-63 529.7328,-45 618.2224,-27 706.7121,-45 618.2224,-63"/>
<text text-anchor="middle" x="618.2224" y="-42.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">cond3 (i&gt;3 ? 1 : 0)</text>
</g>
<g class="m-edge">
<title>p0x7fc231700250&#45;&gt;p0x7fc231700360</title>
<path stroke-dasharray="5,2" d="M454.1198,-65.1868C484.1434,-61.4935 521.4286,-56.9069 552.8682,-53.0394"/>
<polygon points="553.356,-56.5059 562.8538,-51.8111 552.5013,-49.5583 553.356,-56.5059"/>
<text text-anchor="middle" x="508.4779" y="-61" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fc231700690</title>
<ellipse cx="776.4669" cy="-72" rx="27" ry="18"/>
<text text-anchor="middle" x="776.4669" y="-69.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">equl3</text>
</g>
<g class="m-edge">
<title>p0x7fc231700360&#45;&gt;p0x7fc231700690</title>
<path stroke-dasharray="5,2" d="M666.5608,-53.2476C690.2574,-57.2908 718.3184,-62.0786 740.1549,-65.8044"/>
<polygon points="739.5731,-69.2556 750.0193,-67.4875 740.7505,-62.3553 739.5731,-69.2556"/>
<text text-anchor="middle" x="727.9669" y="-67" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>p0x7fc2317007a0</title>
<ellipse cx="776.4669" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="776.4669" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">grtr3</text>
</g>
<g class="m-edge">
<title>p0x7fc231700360&#45;&gt;p0x7fc2317007a0</title>
<path stroke-dasharray="5,2" d="M666.5608,-36.7524C690.2574,-32.7092 718.3184,-27.9214 740.1549,-24.1956"/>
<polygon points="740.7505,-27.6447 750.0193,-22.5125 739.5731,-20.7444 740.7505,-27.6447"/>
<text text-anchor="middle" x="727.9669" y="-29" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
</g>
</svg>
</div></section><section id="ImplementSwitchControlFlow"><h3><a href="#ImplementSwitchControlFlow">Implement Switch Control Flow</a></h3><p>You can use conditional tasking to implement <em>switch</em> control flow. The following example creates a switch control flow diagram that executes one of the three cases at random using four condition tasks.</p><pre class="m-code"><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>

<span class="k">auto</span><span class="w"> </span><span class="p">[</span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">swcond</span><span class="p">,</span><span class="w"> </span><span class="n">case1</span><span class="p">,</span><span class="w"> </span><span class="n">case2</span><span class="p">,</span><span class="w"> </span><span class="n">case3</span><span class="p">,</span><span class="w"> </span><span class="n">target</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="p">[](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;source</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;switch</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">rand</span><span class="p">()</span><span class="o">%</span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;case 1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;case 2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;case 3</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;target</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>

<span class="n">source</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">swcond</span><span class="p">);</span><span class="w"></span>
<span class="n">swcond</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">case1</span><span class="p">,</span><span class="w"> </span><span class="n">case2</span><span class="p">,</span><span class="w"> </span><span class="n">case3</span><span class="p">);</span><span class="w"></span>
<span class="n">target</span><span class="p">.</span><span class="n">succeed</span><span class="p">(</span><span class="n">case1</span><span class="p">,</span><span class="w"> </span><span class="n">case2</span><span class="p">,</span><span class="w"> </span><span class="n">case3</span><span class="p">);</span><span class="w"></span></pre><div class="m-graph"><svg style="width: 40.300rem; height: 15.200rem;" viewBox="0.00 0.00 402.69 152.00">
<g transform="scale(1 1) rotate(0) translate(4 148)">
<title>Taskflow</title>
<g class="m-node m-flat">
<title>p0x7fa25f000030</title>
<ellipse cx="28.8445" cy="-72" rx="28.6898" ry="18"/>
<text text-anchor="middle" x="28.8445" y="-69.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">source</text>
</g>
<g class="m-node">
<title>p0x7fa25f000140</title>
<polygon points="134.6487,-90 94.7292,-72 134.6487,-54 174.5683,-72 134.6487,-90"/>
<text text-anchor="middle" x="134.6487" y="-69.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">switch</text>
</g>
<g class="m-edge">
<title>p0x7fa25f000030&#45;&gt;p0x7fa25f000140</title>
<path d="M57.756,-72C66.0245,-72 75.2851,-72 84.438,-72"/>
<polygon points="84.6676,-75.5001 94.6675,-72 84.6675,-68.5001 84.6676,-75.5001"/>
</g>
<g class="m-node">
<title>p0x7fa25f000250</title>
<polygon points="257.5683,-144 217.6487,-126 257.5683,-108 297.4878,-126 257.5683,-144"/>
<text text-anchor="middle" x="257.5683" y="-123.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">case 1</text>
</g>
<g class="m-edge">
<title>p0x7fa25f000140&#45;&gt;p0x7fa25f000250</title>
<path stroke-dasharray="5,2" d="M154.9464,-80.917C174.7856,-89.6326 205.2151,-103.0007 227.7928,-112.9193"/>
<polygon points="226.6772,-116.252 237.2405,-117.0698 229.4927,-109.8432 226.6772,-116.252"/>
<text text-anchor="middle" x="196.1085" y="-102" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node">
<title>p0x7fa25f000360</title>
<polygon points="257.5683,-90 217.6487,-72 257.5683,-54 297.4878,-72 257.5683,-90"/>
<text text-anchor="middle" x="257.5683" y="-69.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">case 2</text>
</g>
<g class="m-edge">
<title>p0x7fa25f000140&#45;&gt;p0x7fa25f000360</title>
<path stroke-dasharray="5,2" d="M174.8972,-72C185.1907,-72 196.3891,-72 207.1239,-72"/>
<polygon points="207.2294,-75.5001 217.2294,-72 207.2294,-68.5001 207.2294,-75.5001"/>
<text text-anchor="middle" x="196.1085" y="-75" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node">
<title>p0x7fa25f000470</title>
<polygon points="257.5683,-36 217.6487,-18 257.5683,0 297.4878,-18 257.5683,-36"/>
<text text-anchor="middle" x="257.5683" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">case 3</text>
</g>
<g class="m-edge">
<title>p0x7fa25f000140&#45;&gt;p0x7fa25f000470</title>
<path stroke-dasharray="5,2" d="M154.9464,-63.083C174.7856,-54.3674 205.2151,-40.9993 227.7928,-31.0807"/>
<polygon points="229.4927,-34.1568 237.2405,-26.9302 226.6772,-27.748 229.4927,-34.1568"/>
<text text-anchor="middle" x="196.1085" y="-48" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">2</text>
</g>
<g class="m-node m-flat">
<title>p0x7fa25f000580</title>
<ellipse cx="367.6065" cy="-72" rx="27.1572" ry="18"/>
<text text-anchor="middle" x="367.6065" y="-69.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">target</text>
</g>
<g class="m-edge">
<title>p0x7fa25f000250&#45;&gt;p0x7fa25f000580</title>
<path stroke-dasharray="5,2" d="M276.7355,-116.5939C293.2454,-108.4919 317.3842,-96.646 336.6338,-87.1995"/>
<polygon points="338.2007,-90.3293 345.6361,-82.7817 335.1169,-84.0452 338.2007,-90.3293"/>
<text text-anchor="middle" x="319.028" y="-100" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-edge">
<title>p0x7fa25f000360&#45;&gt;p0x7fa25f000580</title>
<path stroke-dasharray="5,2" d="M297.6059,-72C308.2983,-72 319.8078,-72 330.3442,-72"/>
<polygon points="330.4899,-75.5001 340.4899,-72 330.4899,-68.5001 330.4899,-75.5001"/>
<text text-anchor="middle" x="319.028" y="-75" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-edge">
<title>p0x7fa25f000470&#45;&gt;p0x7fa25f000580</title>
<path stroke-dasharray="5,2" d="M276.7355,-27.4061C293.2454,-35.5081 317.3842,-47.354 336.6338,-56.8005"/>
<polygon points="335.1169,-59.9548 345.6361,-61.2183 338.2007,-53.6707 335.1169,-59.9548"/>
<text text-anchor="middle" x="319.028" y="-52" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
</g>
</svg>
</div><p>Assuming <code>swcond</code> returns 1, the program outputs:</p><pre class="m-console"><span class="go">source</span>
<span class="go">switch</span>
<span class="go">case 2</span>
<span class="go">target</span></pre><p>Keep in mind, both switch and case tasks must be described as condition tasks. The following implementation is a common mistake in which case tasks are not described as condition tasks.</p><pre class="m-code"><span class="c1">// wrong implementation of switch control flow using only one condition task</span>
<span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>

<span class="k">auto</span><span class="w"> </span><span class="p">[</span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">swcond</span><span class="p">,</span><span class="w"> </span><span class="n">case1</span><span class="p">,</span><span class="w"> </span><span class="n">case2</span><span class="p">,</span><span class="w"> </span><span class="n">case3</span><span class="p">,</span><span class="w"> </span><span class="n">target</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="p">[](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;source</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;switch</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">rand</span><span class="p">()</span><span class="o">%</span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;case 1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;case 2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;case 3</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;target</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w">  </span><span class="c1">// target has three strong dependencies</span>
<span class="p">);</span><span class="w"></span>

<span class="n">source</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">swcond</span><span class="p">);</span><span class="w"></span>
<span class="n">swcond</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">case1</span><span class="p">,</span><span class="w"> </span><span class="n">case2</span><span class="p">,</span><span class="w"> </span><span class="n">case3</span><span class="p">);</span><span class="w"></span>
<span class="n">target</span><span class="p">.</span><span class="n">succeed</span><span class="p">(</span><span class="n">case1</span><span class="p">,</span><span class="w"> </span><span class="n">case2</span><span class="p">,</span><span class="w"> </span><span class="n">case3</span><span class="p">);</span><span class="w"></span></pre><div class="m-graph"><svg style="width: 37.300rem; height: 15.200rem;" viewBox="0.00 0.00 373.28 152.00">
<g transform="scale(1 1) rotate(0) translate(4 148)">
<title>Taskflow</title>
<g class="m-node m-flat">
<title>p0x7f96d3000030</title>
<ellipse cx="28.8445" cy="-72" rx="28.6898" ry="18"/>
<text text-anchor="middle" x="28.8445" y="-69.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">source</text>
</g>
<g class="m-node">
<title>p0x7f96d3000140</title>
<polygon points="134.6487,-90 94.7292,-72 134.6487,-54 174.5683,-72 134.6487,-90"/>
<text text-anchor="middle" x="134.6487" y="-69.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">switch</text>
</g>
<g class="m-edge">
<title>p0x7f96d3000030&#45;&gt;p0x7f96d3000140</title>
<path d="M57.756,-72C66.0245,-72 75.2851,-72 84.438,-72"/>
<polygon points="84.6676,-75.5001 94.6675,-72 84.6675,-68.5001 84.6676,-75.5001"/>
</g>
<g class="m-node m-flat">
<title>p0x7f96d3000250</title>
<ellipse cx="245.8643" cy="-126" rx="28.0137" ry="18"/>
<text text-anchor="middle" x="245.8643" y="-123.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">case 1</text>
</g>
<g class="m-edge">
<title>p0x7f96d3000140&#45;&gt;p0x7f96d3000250</title>
<path stroke-dasharray="5,2" d="M154.021,-81.4061C170.6006,-89.4562 194.7921,-101.2022 214.1855,-110.6186"/>
<polygon points="212.7416,-113.8082 223.2661,-115.0276 215.7991,-107.5112 212.7416,-113.8082"/>
<text text-anchor="middle" x="196.1085" y="-105" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>p0x7f96d3000360</title>
<ellipse cx="245.8643" cy="-72" rx="28.0137" ry="18"/>
<text text-anchor="middle" x="245.8643" y="-69.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">case 2</text>
</g>
<g class="m-edge">
<title>p0x7f96d3000140&#45;&gt;p0x7f96d3000360</title>
<path stroke-dasharray="5,2" d="M174.8001,-72C185.3463,-72 196.6982,-72 207.1665,-72"/>
<polygon points="207.2778,-75.5001 217.2777,-72 207.2777,-68.5001 207.2778,-75.5001"/>
<text text-anchor="middle" x="196.1085" y="-75" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>p0x7f96d3000470</title>
<ellipse cx="245.8643" cy="-18" rx="28.0137" ry="18"/>
<text text-anchor="middle" x="245.8643" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">case 3</text>
</g>
<g class="m-edge">
<title>p0x7f96d3000140&#45;&gt;p0x7f96d3000470</title>
<path stroke-dasharray="5,2" d="M154.021,-62.5939C170.6006,-54.5438 194.7921,-42.7978 214.1855,-33.3814"/>
<polygon points="215.7991,-36.4888 223.2661,-28.9724 212.7416,-30.1918 215.7991,-36.4888"/>
<text text-anchor="middle" x="196.1085" y="-46" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">2</text>
</g>
<g class="m-node m-flat">
<title>p0x7f96d3000580</title>
<ellipse cx="338.1986" cy="-72" rx="27.1572" ry="18"/>
<text text-anchor="middle" x="338.1986" y="-69.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">target</text>
</g>
<g class="m-edge">
<title>p0x7f96d3000250&#45;&gt;p0x7f96d3000580</title>
<path d="M266.8164,-113.7466C279.1806,-106.5156 295.0254,-97.249 308.6446,-89.2841"/>
<polygon points="310.7823,-92.0886 317.6475,-84.0189 307.2484,-86.0461 310.7823,-92.0886"/>
</g>
<g class="m-edge">
<title>p0x7f96d3000360&#45;&gt;p0x7f96d3000580</title>
<path d="M274.3211,-72C282.6999,-72 291.996,-72 300.8436,-72"/>
<polygon points="300.9422,-75.5001 310.9421,-72 300.9421,-68.5001 300.9422,-75.5001"/>
</g>
<g class="m-edge">
<title>p0x7f96d3000470&#45;&gt;p0x7f96d3000580</title>
<path d="M266.8164,-30.2534C279.1806,-37.4844 295.0254,-46.751 308.6446,-54.7159"/>
<polygon points="307.2484,-57.9539 317.6475,-59.9811 310.7823,-51.9114 307.2484,-57.9539"/>
</g>
</g>
</svg>
</div><p>In this faulty implementation, task <code>target</code> has three strong dependencies but only one of them will be met. This is because <code>swcond</code> is a condition task, and only one case task will be executed depending on the return of <code>swcond</code>.</p></section><section id="ImplementDoWhileLoopControlFlow"><h3><a href="#ImplementDoWhileLoopControlFlow">Implement Do-While-Loop Control Flow</a></h3><p>You can use conditional tasking to implement <em>do-while-loop</em> control flow. The following example creates a do-while-loop control flow diagram that repeatedly increments variable <code>i</code> five times using one condition task.</p><pre class="m-code"><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"></span>

<span class="k">auto</span><span class="w"> </span><span class="p">[</span><span class="n">init</span><span class="p">,</span><span class="w"> </span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">cond</span><span class="p">,</span><span class="w"> </span><span class="n">done</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;i=0</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;i++ =&gt; i=&quot;</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;done</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">);</span><span class="w">  </span>

<span class="n">init</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">body</span><span class="p">);</span><span class="w"></span>
<span class="n">body</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">cond</span><span class="p">);</span><span class="w"></span>
<span class="n">cond</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">done</span><span class="p">);</span><span class="w"></span></pre><div class="m-graph"><svg style="width: 40.400rem; height: 4.400rem;" viewBox="0.00 0.00 403.94 44.00">
<g transform="scale(1 1) rotate(0) translate(4 40)">
<title>Taskflow</title>
<g class="m-node m-flat">
<title>p0x7f950d600030</title>
<ellipse cx="27" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">init</text>
</g>
<g class="m-node m-flat">
<title>p0x7f950d600140</title>
<ellipse cx="121.0218" cy="-18" rx="30.0436" ry="18"/>
<text text-anchor="middle" x="121.0218" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">do i++</text>
</g>
<g class="m-edge">
<title>p0x7f950d600030&#45;&gt;p0x7f950d600140</title>
<path d="M54.195,-18C62.459,-18 71.723,-18 80.6599,-18"/>
<polygon points="80.9212,-21.5001 90.9212,-18 80.9212,-14.5001 80.9212,-21.5001"/>
</g>
<g class="m-node">
<title>p0x7f950d600250</title>
<polygon points="246.4908,-36 194.0964,-18 246.4908,0 298.8853,-18 246.4908,-36"/>
<text text-anchor="middle" x="246.4908" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">while i&lt;5</text>
</g>
<g class="m-edge">
<title>p0x7f950d600140&#45;&gt;p0x7f950d600250</title>
<path d="M151.0748,-18C160.8438,-18 172.0799,-18 183.334,-18"/>
<polygon points="183.633,-21.5001 193.6329,-18 183.6329,-14.5001 183.633,-21.5001"/>
</g>
<g class="m-edge">
<title>p0x7f950d600250&#45;&gt;p0x7f950d600140</title>
<path stroke-dasharray="5,2" d="M220.0447,-8.9532C205.1147,-4.9198 186.0869,-1.5663 169.0436,-4 165.0944,-4.5639 161.0162,-5.3763 156.9824,-6.3297"/>
<polygon points="155.9198,-2.9903 147.146,-8.9293 157.7084,-9.758 155.9198,-2.9903"/>
<text text-anchor="middle" x="172.5436" y="-7" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>p0x7f950d600360</title>
<ellipse cx="368.938" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="368.938" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">done</text>
</g>
<g class="m-edge">
<title>p0x7f950d600250&#45;&gt;p0x7f950d600360</title>
<path stroke-dasharray="5,2" d="M299.1301,-18C310.0025,-18 321.2433,-18 331.4443,-18"/>
<polygon points="331.6395,-21.5001 341.6394,-18 331.6394,-14.5001 331.6395,-21.5001"/>
<text text-anchor="middle" x="320.438" y="-21" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
</g>
</svg>
</div><p>The program outputs:</p><pre class="m-console"><span class="go">i=0</span>
<span class="go">i++ =&gt; i=1</span>
<span class="go">i++ =&gt; i=2</span>
<span class="go">i++ =&gt; i=3</span>
<span class="go">i++ =&gt; i=4</span>
<span class="go">i++ =&gt; i=5</span>
<span class="go">done</span></pre></section><section id="ImplementWhileLoopControlFlow"><h3><a href="#ImplementWhileLoopControlFlow">Implement While-Loop Control Flow</a></h3><p>You can use conditional tasking to implement <em>while-loop</em> control flow. The following example creates a while-loop control flow diagram that repeatedly increments variable <code>i</code> five times using two condition task.</p><pre class="m-code"><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"></span>

<span class="k">auto</span><span class="w"> </span><span class="p">[</span><span class="n">init</span><span class="p">,</span><span class="w"> </span><span class="n">cond</span><span class="p">,</span><span class="w"> </span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">back</span><span class="p">,</span><span class="w"> </span><span class="n">done</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;i=0</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;while i&lt;5</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;i++=&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;back</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;done</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>

<span class="n">init</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">cond</span><span class="p">);</span><span class="w"></span>
<span class="n">cond</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">done</span><span class="p">);</span><span class="w"></span>
<span class="n">body</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">back</span><span class="p">);</span><span class="w"></span>
<span class="n">back</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">cond</span><span class="p">);</span><span class="w"></span></pre><div class="m-graph"><svg style="width: 40.400rem; height: 13.300rem;" viewBox="0.00 0.00 404.49 133.00">
<g transform="scale(1 1) rotate(0) translate(4 129)">
<title>Taskflow</title>
<g class="m-node m-flat">
<title>p0x7fdba4000030</title>
<ellipse cx="27" cy="-53" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-50.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">init</text>
</g>
<g class="m-node">
<title>p0x7fdba4000140</title>
<polygon points="143.4472,-71 91.0528,-53 143.4472,-35 195.8416,-53 143.4472,-71"/>
<text text-anchor="middle" x="143.4472" y="-50.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">while i&lt;5</text>
</g>
<g class="m-edge">
<title>p0x7fdba4000030&#45;&gt;p0x7fdba4000140</title>
<path d="M54.008,-53C62.0998,-53 71.3337,-53 80.7246,-53"/>
<polygon points="80.9298,-56.5001 90.9298,-53 80.9297,-49.5001 80.9298,-56.5001"/>
</g>
<g class="m-node m-flat">
<title>p0x7fdba4000470</title>
<ellipse cx="265.8944" cy="-107" rx="27" ry="18"/>
<text text-anchor="middle" x="265.8944" y="-104.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">done</text>
</g>
<g class="m-edge">
<title>p0x7fdba4000140&#45;&gt;p0x7fdba4000470</title>
<path stroke-dasharray="5,2" d="M166.4786,-63.157C185.4627,-71.5291 212.604,-83.4986 233.7326,-92.8164"/>
<polygon points="232.4042,-96.0558 242.9663,-96.8886 235.2288,-89.651 232.4042,-96.0558"/>
<text text-anchor="middle" x="217.3944" y="-89" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fdba4000250</title>
<ellipse cx="265.8944" cy="-53" rx="27" ry="18"/>
<text text-anchor="middle" x="265.8944" y="-50.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">i++</text>
</g>
<g class="m-edge">
<title>p0x7fdba4000140&#45;&gt;p0x7fdba4000250</title>
<path stroke-dasharray="5,2" d="M196.0864,-53C206.9588,-53 218.1997,-53 228.4007,-53"/>
<polygon points="228.5958,-56.5001 238.5958,-53 228.5958,-49.5001 228.5958,-56.5001"/>
<text text-anchor="middle" x="217.3944" y="-56" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node">
<title>p0x7fdba4000360</title>
<polygon points="363.1942,-36 330.0934,-18 363.1942,0 396.295,-18 363.1942,-36"/>
<text text-anchor="middle" x="363.1942" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">back</text>
</g>
<g class="m-edge">
<title>p0x7fdba4000250&#45;&gt;p0x7fdba4000360</title>
<path d="M289.946,-44.3483C303.0785,-39.6244 319.4562,-33.7331 333.3928,-28.7199"/>
<polygon points="334.803,-31.9323 343.0281,-25.254 332.4336,-25.3455 334.803,-31.9323"/>
</g>
<g class="m-edge">
<title>p0x7fdba4000360&#45;&gt;p0x7fdba4000140</title>
<path stroke-dasharray="5,2" d="M336.7371,-14.1377C311.3883,-11.1923 272.1782,-8.618 238.8944,-15 216.0722,-19.376 191.7575,-29.1406 173.3808,-37.6753"/>
<polygon points="171.8645,-34.5207 164.3517,-41.9912 174.8834,-40.8363 171.8645,-34.5207"/>
<text text-anchor="middle" x="265.8944" y="-18" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
</g>
</svg>
</div><p>The program outputs:</p><pre class="m-console"><span class="go">i=0</span>
<span class="go">while i&lt;5</span>
<span class="go">i++=0</span>
<span class="go">back</span>
<span class="go">while i&lt;5</span>
<span class="go">i++=1</span>
<span class="go">back</span>
<span class="go">while i&lt;5</span>
<span class="go">i++=2</span>
<span class="go">back</span>
<span class="go">while i&lt;5</span>
<span class="go">i++=3</span>
<span class="go">back</span>
<span class="go">while i&lt;5</span>
<span class="go">i++=4</span>
<span class="go">back</span>
<span class="go">while i&lt;5</span>
<span class="go">done</span></pre><p>Notice that, when you implement a while-loop block, you cannot direct a dependency from the body task to the loop condition task. Doing so will introduce a strong dependency between the body task and the loop condition task, and the loop condition task will never be executed. The following code shows a common faulty implementation of while-loop control flow.</p><pre class="m-code"><span class="c1">// wrong implementation of while-loop using only one condition task</span>
<span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"></span>

<span class="k">auto</span><span class="w"> </span><span class="p">[</span><span class="n">init</span><span class="p">,</span><span class="w"> </span><span class="n">cond</span><span class="p">,</span><span class="w"> </span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">done</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;i=0</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;while i&lt;5</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;i++=&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;done</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>

<span class="n">init</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">cond</span><span class="p">);</span><span class="w"></span>
<span class="n">cond</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">done</span><span class="p">);</span><span class="w"></span>
<span class="n">body</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">cond</span><span class="p">);</span><span class="w"></span></pre><div class="m-graph"><svg style="width: 30.100rem; height: 10.400rem;" viewBox="0.00 0.00 300.89 104.00">
<g transform="scale(1 1) rotate(0) translate(4 100)">
<title>Taskflow</title>
<g class="m-node m-flat">
<title>p0x7fdba4000030</title>
<ellipse cx="27" cy="-44" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-41.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">init</text>
</g>
<g class="m-node">
<title>p0x7fdba4000140</title>
<polygon points="143.4472,-62 91.0528,-44 143.4472,-26 195.8416,-44 143.4472,-62"/>
<text text-anchor="middle" x="143.4472" y="-41.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">while i&lt;5</text>
</g>
<g class="m-edge">
<title>p0x7fdba4000030&#45;&gt;p0x7fdba4000140</title>
<path d="M54.008,-44C62.0998,-44 71.3337,-44 80.7246,-44"/>
<polygon points="80.9298,-47.5001 90.9298,-44 80.9297,-40.5001 80.9298,-47.5001"/>
</g>
<g class="m-node m-flat">
<title>p0x7fdba4000470</title>
<ellipse cx="265.8944" cy="-78" rx="27" ry="18"/>
<text text-anchor="middle" x="265.8944" y="-75.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">done</text>
</g>
<g class="m-edge">
<title>p0x7fdba4000140&#45;&gt;p0x7fdba4000470</title>
<path stroke-dasharray="5,2" d="M172.4655,-52.0575C190.0088,-56.9288 212.484,-63.1695 230.994,-68.3092"/>
<polygon points="230.2411,-71.7325 240.813,-71.0356 232.1139,-64.9877 230.2411,-71.7325"/>
<text text-anchor="middle" x="217.3944" y="-68" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fdba4000250</title>
<ellipse cx="265.8944" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="265.8944" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">i++</text>
</g>
<g class="m-edge">
<title>p0x7fdba4000140&#45;&gt;p0x7fdba4000250</title>
<path stroke-dasharray="5,2" d="M175.9393,-37.1007C192.4852,-33.5874 212.6518,-29.3053 229.6939,-25.6867"/>
<polygon points="230.7861,-29.0329 239.841,-23.5321 229.3321,-22.1855 230.7861,-29.0329"/>
<text text-anchor="middle" x="217.3944" y="-31" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-edge">
<title>p0x7fdba4000250&#45;&gt;p0x7fdba4000140</title>
<path d="M239.0626,-20.9368C230.9404,-22.007 222.0208,-23.3643 213.8944,-25 203.1661,-27.1594 191.6559,-30.0251 181.1134,-32.8745"/>
<polygon points="180.0612,-29.5341 171.3593,-35.5778 181.9308,-36.2798 180.0612,-29.5341"/>
</g>
</g>
</svg>
</div><p>In the taskflow diagram above, the scheduler starts with <code>init</code> and then decrements the strong dependency of the loop condition task, <code>while i&lt;5</code>. After this, there remains one strong dependency, i.e., introduced by the loop body task, <code>i++</code>. However, task <code>i++</code> will not be executed until the loop condition task returns <code>0</code>, causing a deadlock.</p></section></section><section id="CreateAMultiConditionTask"><h2><a href="#CreateAMultiConditionTask">Create a Multi-condition Task</a></h2><p>A <em>multi-condition task</em> is a generalized version of conditional tasking. In some cases, applications need to jump to multiple branches from a parent task. This can be done by creating a <em>multi-condition task</em> which allows a task to select one or more successor tasks to execute. Similar to a condition task, a multi-condition task returns a vector of integer indices that indicate the successors to execute when the multi-condition task completes. The index is defined with respect to the order of successors preceded by a multi-condition task. For example, the following code creates a multi-condition task, <code>A</code>, that informs the scheduler to run on its two successors, <code>B</code> and <code>D</code>.</p><pre class="m-code"><span class="n">tf</span><span class="o">::</span><span class="n">Executor</span><span class="w"> </span><span class="n">executor</span><span class="p">;</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>

<span class="k">auto</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">]()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">SmallVector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;A</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">};</span><span class="w"></span>
<span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">);</span><span class="w"></span>
<span class="k">auto</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;B</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B&quot;</span><span class="p">);</span><span class="w"></span>
<span class="k">auto</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;C</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;C&quot;</span><span class="p">);</span><span class="w"></span>
<span class="k">auto</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](){</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;D</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;D&quot;</span><span class="p">);</span><span class="w"></span>

<span class="n">A</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">C</span><span class="p">,</span><span class="w"> </span><span class="n">D</span><span class="p">);</span><span class="w"></span>

<span class="n">executor</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">taskflow</span><span class="p">).</span><span class="n">wait</span><span class="p">();</span><span class="w"></span></pre><div class="m-graph"><svg style="width: 20.600rem; height: 12.700rem;" viewBox="0.00 0.00 206.00 127.00">
<g transform="scale(1 1) rotate(0) translate(4 123)">
<title>Taskflow</title>
<g class="m-node">
<title>p0x7bc400014030</title>
<polygon points="99,-119 72,-101 99,-83 126,-101 99,-119"/>
<text text-anchor="middle" x="99" y="-98.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A</text>
</g>
<g class="m-node m-flat">
<title>p0x7bc400014118</title>
<ellipse cx="27" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B</text>
</g>
<g class="m-edge">
<title>p0x7bc400014030&#45;&gt;p0x7bc400014118</title>
<path stroke-dasharray="5,2" d="M88.9887,-89.4592C78.2619,-77.0936 60.9435,-57.1293 47.335,-41.4418"/>
<polygon points="49.8081,-38.9514 40.6114,-33.6909 44.5203,-43.5383 49.8081,-38.9514"/>
<text text-anchor="middle" x="71.5" y="-57" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node m-flat">
<title>p0x7bc400014200</title>
<ellipse cx="99" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="99" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">C</text>
</g>
<g class="m-edge">
<title>p0x7bc400014030&#45;&gt;p0x7bc400014200</title>
<path stroke-dasharray="5,2" d="M99,-82.9902C99,-72.2963 99,-58.4994 99,-46.3706"/>
<polygon points="102.5001,-46.2612 99,-36.2612 95.5001,-46.2613 102.5001,-46.2612"/>
<text text-anchor="middle" x="102.5" y="-57" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-node m-flat">
<title>p0x7bc4000142e8</title>
<ellipse cx="171" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="171" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">D</text>
</g>
<g class="m-edge">
<title>p0x7bc400014030&#45;&gt;p0x7bc4000142e8</title>
<path stroke-dasharray="5,2" d="M109.0113,-89.4592C119.7381,-77.0936 137.0565,-57.1293 150.665,-41.4418"/>
<polygon points="153.4797,-43.5383 157.3886,-33.6909 148.1919,-38.9514 153.4797,-43.5383"/>
<text text-anchor="middle" x="142.5" y="-57" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">2</text>
</g>
</g>
</svg>
</div><aside class="m-note m-info"><h4>Note</h4><p>The return type of a multi-condition task is <a href="classtf_1_1SmallVector.html" class="m-doc">tf::<wbr />SmallVector</a>, which provides C++ vector-style functionalities but comes with small buffer optimization.</p></aside><p>One important application of conditional tasking is implementing <em>iterative control flow</em>. You can use multi-condition tasks to create multiple loops that run concurrently. The following code creates a sequential chain of four loops in which each loop increments a counter variable ten times. When the program completes, the value of the counter variable is <code>40</code>.</p><pre class="m-code"><span class="n">tf</span><span class="o">::</span><span class="n">Executor</span><span class="w"> </span><span class="n">executor</span><span class="p">;</span><span class="w"></span>
<span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">atomic</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">counter</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span><span class="w"></span>

<span class="k">auto</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="kt">bool</span><span class="p">{</span><span class="nb">true</span><span class="p">},</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">0</span><span class="p">)]()</span><span class="w"> </span><span class="k">mutable</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">SmallVector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">};</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">counter</span><span class="p">.</span><span class="n">fetch_add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">memory_order_relaxed</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="o">++</span><span class="n">c</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">};</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="k">auto</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([](){});</span><span class="w"></span>
<span class="k">auto</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">loop</span><span class="p">);</span><span class="w"></span>
<span class="k">auto</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">loop</span><span class="p">);</span><span class="w"></span>
<span class="k">auto</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">loop</span><span class="p">);</span><span class="w"></span>

<span class="n">A</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B</span><span class="p">);</span><span class="w"></span>
<span class="n">B</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">C</span><span class="p">);</span><span class="w"></span>
<span class="n">C</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="w"> </span><span class="n">D</span><span class="p">);</span><span class="w"></span>
<span class="n">D</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">D</span><span class="p">);</span><span class="w"></span>

<span class="n">executor</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">taskflow</span><span class="p">).</span><span class="n">wait</span><span class="p">();</span><span class="w">  </span><span class="c1">// counter == 40</span></pre><div class="m-graph"><svg style="width: 44.400rem; height: 7.300rem;" viewBox="0.00 0.00 444.00 73.00">
<g transform="scale(1 1) rotate(0) translate(4 69)">
<title>Taskflow</title>
<g class="m-node m-flat">
<title>p0x7bc400014030</title>
<ellipse cx="27" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">init</text>
</g>
<g class="m-node">
<title>p0x7bc400014118</title>
<polygon points="118,-36 91,-18 118,0 145,-18 118,-36"/>
<text text-anchor="middle" x="118" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A</text>
</g>
<g class="m-edge">
<title>p0x7bc400014030&#45;&gt;p0x7bc400014118</title>
<path d="M54.303,-18C62.5813,-18 71.8217,-18 80.6405,-18"/>
<polygon points="80.7163,-21.5001 90.7163,-18 80.7162,-14.5001 80.7163,-21.5001"/>
</g>
<g class="m-edge">
<title>p0x7bc400014118&#45;&gt;p0x7bc400014118</title>
<path stroke-dasharray="5,2" d="M110.9102,-31.667C108.0742,-42.6563 110.4375,-54 118,-54 123.1992,-54 125.941,-48.6383 126.2253,-41.7163"/>
<polygon points="129.6906,-41.2108 125.0898,-31.667 122.7348,-41.9968 129.6906,-41.2108"/>
<text text-anchor="middle" x="118" y="-57" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node">
<title>p0x7bc400014200</title>
<polygon points="215,-36 188,-18 215,0 242,-18 215,-36"/>
<text text-anchor="middle" x="215" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B</text>
</g>
<g class="m-edge">
<title>p0x7bc400014118&#45;&gt;p0x7bc400014200</title>
<path stroke-dasharray="5,2" d="M145.0199,-18C155.1304,-18 166.8016,-18 177.6794,-18"/>
<polygon points="177.7886,-21.5001 187.7886,-18 177.7885,-14.5001 177.7886,-21.5001"/>
<text text-anchor="middle" x="166.5" y="-21" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-edge">
<title>p0x7bc400014200&#45;&gt;p0x7bc400014200</title>
<path stroke-dasharray="5,2" d="M207.3733,-31.2925C204.114,-42.397 206.6563,-54 215,-54 220.7363,-54 223.7305,-48.5158 223.9826,-41.4797"/>
<polygon points="227.4156,-40.7433 222.6267,-31.2925 220.4768,-41.6669 227.4156,-40.7433"/>
<text text-anchor="middle" x="215" y="-57" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node">
<title>p0x7bc4000142e8</title>
<polygon points="312,-36 285,-18 312,0 339,-18 312,-36"/>
<text text-anchor="middle" x="312" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">C</text>
</g>
<g class="m-edge">
<title>p0x7bc400014200&#45;&gt;p0x7bc4000142e8</title>
<path stroke-dasharray="5,2" d="M242.0199,-18C252.1304,-18 263.8016,-18 274.6794,-18"/>
<polygon points="274.7886,-21.5001 284.7886,-18 274.7885,-14.5001 274.7886,-21.5001"/>
<text text-anchor="middle" x="263.5" y="-21" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-edge">
<title>p0x7bc4000142e8&#45;&gt;p0x7bc4000142e8</title>
<path stroke-dasharray="5,2" d="M304.3733,-31.2925C301.114,-42.397 303.6563,-54 312,-54 317.7363,-54 320.7305,-48.5158 320.9826,-41.4797"/>
<polygon points="324.4156,-40.7433 319.6267,-31.2925 317.4768,-41.6669 324.4156,-40.7433"/>
<text text-anchor="middle" x="312" y="-57" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-node">
<title>p0x7bc4000143d0</title>
<polygon points="409,-36 382,-18 409,0 436,-18 409,-36"/>
<text text-anchor="middle" x="409" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">D</text>
</g>
<g class="m-edge">
<title>p0x7bc4000142e8&#45;&gt;p0x7bc4000143d0</title>
<path stroke-dasharray="5,2" d="M339.0199,-18C349.1304,-18 360.8016,-18 371.6794,-18"/>
<polygon points="371.7886,-21.5001 381.7886,-18 371.7885,-14.5001 371.7886,-21.5001"/>
<text text-anchor="middle" x="360.5" y="-21" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-edge">
<title>p0x7bc4000143d0&#45;&gt;p0x7bc4000143d0</title>
<path stroke-dasharray="5,2" d="M401.3733,-31.2925C398.114,-42.397 400.6563,-54 409,-54 414.7363,-54 417.7305,-48.5158 417.9826,-41.4797"/>
<polygon points="421.4156,-40.7433 416.6267,-31.2925 414.4768,-41.6669 421.4156,-40.7433"/>
<text text-anchor="middle" x="409" y="-57" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
</g>
</svg>
</div><aside class="m-note m-warning"><h4>Attention</h4><p>It is your responsibility to ensure the return of a multi-condition task goes to a correct successor task. If a returned index falls outside the successor range of a multi-condition task, the scheduler will skip that index without doing anything.</p></aside></section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim"></span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim"></span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Taskflow handbook is part of the <a href="https://taskflow.github.io">Taskflow project</a>, copyright  <a href="https://tsung-wei-huang.github.io/">Dr. Tsung-Wei Huang</a>, 2018&ndash;2023.<br />Generated by <a href="https://doxygen.org/">Doxygen</a> 1.8.14 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
